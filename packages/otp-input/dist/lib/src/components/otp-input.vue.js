"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const l=require("vue");;/* empty css                   */const z=["autoFocus","value","required","readonly","disabled","onInput","onFocus","onKeydown"],D={key:0,class:"text-center error-message"},S=l.defineComponent({name:"otp-input",__name:"otp-input",props:{label:{},labelClass:{},className:{},inputClass:{},primaryColor:{default:"#3880ff"},secondaryColor:{default:"#3dc2ff"},position:{default:"center"},fontSize:{},borders:{default:"btlr"},fontFamily:{},gap:{},inputsCount:{default:6},borderSize:{},fieldWidth:{default:56},fieldHeight:{default:56},disabled:{type:[Boolean,null]},required:{type:[Boolean,null]},rounded:{type:[Boolean,null]},hasError:{type:[Boolean,null]},errorMessage:{},modelValue:{default:""}},emits:["change","complete","update:modelValue"],setup(h,{emit:y}){const m=y,s=h,d={backspace:"Backspace",delete:"Delete",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown"},p=l.ref([]),o=l.ref([]),i=l.ref([]),b=l.ref(0),C=()=>{let e;if(o.value&&o.value.length){e=[];for(let t=0;t<s.inputsCount;t++)e.push(o.value[t]||"");b.value=o.value.length>=s.inputsCount?0:o.value.length}else e=Array(s.inputsCount).fill("");p.value=[];for(let t=0;t<s.inputsCount;t++)p.value.push(t+1);o.value=e},k=(e,t)=>{const n=i.value[t];n&&n.value===""?n.focus():e.target.select()},B=(e,t)=>{if(e.target.value=e.target.value.replace(/[^\d]/gi,""),e.target.value===""||!e.target.validity.valid)return;let n;const r=e.target.value;if(o.value=Object.assign([],o.value),r.length>1){let a=r.length+t-1;a>=s.inputsCount&&(a=s.inputsCount-1),n=p.value[a],r.split("").forEach((g,u)=>{const c=t+u;c<s.inputsCount&&(o.value[c]=g)})}else n=p.value[t+1],o.value[t]=r;if(n){const a=i.value[n];a.focus(),a.select()}f(o.value)},w=(e,t)=>{const n=t-1,r=t+1,a=p.value[n],v=p.value[r],g=u=>{u.preventDefault();const c=[...o.value];o.value[t]?(c[t]="",o.value=c,f(c)):v&&(c[r]="",i.value[v].focus(),o.value=c,f(c))};switch(e.key){case d.backspace:{e.preventDefault();const u=[...o.value];o.value[t]?(u[t]="",o.value=u,f(u)):a&&(u[n]="",i.value[a].focus(),o.value=u,f(u));break}case d.delete:{g(e);break}case d.left:e.preventDefault(),a&&i.value[a].focus();break;case d.right:e.preventDefault(),v&&i.value[v].focus();break;case d.up:case d.down:e.preventDefault();break}},f=e=>{var n;const t=e.join("");m("change",t),m("update:modelValue",t),t.length>=s.inputsCount&&(m("complete",t),(n=i.value[t.length])==null||n.blur())},E=()=>{const e={b:"border-b",t:"border-t",l:"border-l",r:"border-r"};return s.borders.split("").map(r=>e[r]).join(" ")};return l.watch(()=>s.modelValue,e=>{for(let t=0;t<s.inputsCount;t++)o.value[t]=e[t]||""},{immediate:!0}),C(),l.onBeforeUpdate(()=>{i.value=[]}),(e,t)=>(l.openBlock(),l.createElementBlock("div",{class:l.normalizeClass(["code-input-container",[e.className,{disabled:e.disabled},{"has-error":e.hasError}]]),style:l.normalizeStyle({"--ci-gap":e.gap,"--ci-font-size":e.fontSize,"--ci-font-family":e.fontFamily,"--ci-border-width":e.borderSize,"--ci-border-radius":e.rounded?"5px":void 0,"--ci-color-primary":e.primaryColor,"--ci-color-secondary":e.secondaryColor})},[l.renderSlot(e.$slots,"default",{},()=>[e.label?(l.openBlock(),l.createElementBlock("p",{key:0,class:l.normalizeClass(["label",e.labelClass])},l.toDisplayString(e.label),3)):l.createCommentVNode("",!0)]),l.createElementVNode("div",{class:l.normalizeClass(["code-input font-alatsi no-border",[E(),"position-"+e.position]])},[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(o.value,(n,r)=>(l.openBlock(),l.createElementBlock(l.Fragment,null,[r>-1?(l.openBlock(),l.createElementBlock("input",{class:l.normalizeClass(["text-center transition-all border-none rounded-lg outline-none w-14 h-14 focus:outline-none focus:ring-0",e.inputClass]),type:"number",pattern:"[0-9]",maxlength:"1",style:l.normalizeStyle({width:`${e.fieldWidth}px`,height:`${e.fieldHeight}px`}),autoFocus:r===b.value&&!e.disabled,value:n,key:r,ref_for:!0,ref:a=>{a&&(i.value[r+1]=a)},required:e.required===!0,readonly:r>0&&o.value[r-1]==="",disabled:e.disabled===!0,onInput:a=>B(a,r),onFocus:a=>k(a,r),onKeydown:a=>w(a,r)},null,46,z)):l.createCommentVNode("",!0)],64))),256))],2),e.hasError&&e.errorMessage?(l.openBlock(),l.createElementBlock("div",D,l.toDisplayString(e.errorMessage),1)):l.createCommentVNode("",!0)],6))}});exports.default=S;
