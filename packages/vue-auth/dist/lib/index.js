"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const o=require("pinia"),f=require("./src/utils/plugins.js"),g=require("./src/utils/config.js"),q=require("./src/stores/vue-auth.js"),P=require("./src/composables/useInlineAuth.js"),w=require("./src/composables/useAuth.js"),d=require("./src/utils/middlewares.js"),v=r=>{const{router:u,loginRouteName:l,defaultAuthRouteName:c}=r;return{install:a=>{if(g.setAuthConfig(r),!!!o.getActivePinia()){const t=o.createPinia();a.use(t)}const e=q.useAuthStore();u&&u.beforeEach((t,h,i)=>{const A=t.meta.requiresAuth,m=t.meta.requiresGuest,s=l?u.resolve(l):null,n=c?u.resolve(c):null;if(s!=null&&s.name&&A&&!e.isAuthenticated)return i({name:s.name,query:{redirect:t.fullPath}});if(n!=null&&n.name&&m&&e.isAuthenticated)return i({name:n.name,query:{redirect:t.fullPath}});r.middlewares?f.runMiddlewares(r.middlewares,t,h,i,u,{user:e.user,token:e.token,isAuthenticated:e.isAuthenticated}):i()}),e.loadUserFromStorage(r),a.config.globalProperties.$user=e.user,a.config.globalProperties.$isAuthenticated=e.isAuthenticated}}};exports.useInlineAuth=P.useInlineAuth;exports.useAuth=w.useAuth;exports.authMiddleware=d.authMiddleware;exports.roleMiddleware=d.roleMiddleware;exports.authPlugin=v;
