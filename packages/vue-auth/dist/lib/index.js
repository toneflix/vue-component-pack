"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const f=require("pinia"),m=require("./src/config.js"),g=require("./src/stores/auth.js"),A=require("./src/composables/useAuth.js"),d=i=>{const{router:t,loginRouteName:o,defaultAuthRouteName:c}=i;return{install:n=>{const r=g.useAuthStore();if(!Object.keys(n._context.config.globalProperties).includes("$pinia")){const e=f.createPinia();n.use(e)}m.setAuthConfig(i),t&&t.beforeEach((e,b,a)=>{const l=e.meta.requiresAuth,h=e.meta.requiresGuest,u=o?t.resolve(o):null,s=c?t.resolve(c):null;if(u!=null&&u.name&&l&&!r.isAuthenticated)return a({name:u.name,query:{redirect:e.fullPath}});if(s!=null&&s.name&&h&&r.isAuthenticated)return a({name:s.name,query:{redirect:e.fullPath}});a()}),r.loadUserFromStorage(i),n.config.globalProperties.$user=r.user}}};exports.useAuth=A.useAuth;exports.authPlugin=d;
