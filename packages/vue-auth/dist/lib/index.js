"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const A=require("pinia"),f=require("./src/utils/plugins.js"),g=require("./src/utils/config.js"),m=require("./src/stores/auth.js"),q=require("./src/composables/useInlineAuth.js"),P=require("./src/composables/useAuth.js"),b=u=>{const{router:i,loginRouteName:l,defaultAuthRouteName:c}=u;return{install:r=>{g.setAuthConfig(u);const e=m.useAuthStore();if(!Object.keys(r._context.config.globalProperties).includes("$pinia")){const t=A.createPinia();r.use(t)}i&&i.beforeEach((t,o,s)=>{const h=t.meta.requiresAuth,d=t.meta.requiresGuest,n=l?i.resolve(l):null,a=c?i.resolve(c):null;if(n!=null&&n.name&&h&&!e.isAuthenticated)return s({name:n.name,query:{redirect:t.fullPath}});if(a!=null&&a.name&&d&&e.isAuthenticated)return s({name:a.name,query:{redirect:t.fullPath}});u.middlewares?f.runMiddlewares(u.middlewares,t,o,s,i,{user:e.user,token:e.token,isAuthenticated:e.isAuthenticated}):s()}),e.loadUserFromStorage(u),r.config.globalProperties.$user=e.user,r.config.globalProperties.$isAuthenticated=e.isAuthenticated}}};exports.useInlineAuth=q.useInlineAuth;exports.useAuth=P.useAuth;exports.authPlugin=b;
