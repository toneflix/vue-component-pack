"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const o=require("./src/config.js"),m=require("pinia"),f=require("./src/stores/auth.js"),g=require("./src/composables/useInlineAuth.js"),q=require("./src/composables/useAuth.js"),P=u=>{const{router:r,loginRouteName:l,defaultAuthRouteName:c}=u;return{install:a=>{o.setAuthConfig(u);const e=f.useAuthStore();if(!Object.keys(a._context.config.globalProperties).includes("$pinia")){const t=m.createPinia();a.use(t)}r&&r.beforeEach((t,h,s)=>{const d=t.meta.requiresAuth,A=t.meta.requiresGuest,i=l?r.resolve(l):null,n=c?r.resolve(c):null;if(i!=null&&i.name&&d&&!e.isAuthenticated)return s({name:i.name,query:{redirect:t.fullPath}});if(n!=null&&n.name&&A&&e.isAuthenticated)return s({name:n.name,query:{redirect:t.fullPath}});u.middlewares?o.runMiddlewares(u.middlewares,t,h,s,{user:e.user,token:e.token,isAuthenticated:e.isAuthenticated}):s()}),e.loadUserFromStorage(u),a.config.globalProperties.$user=e.user}}};exports.useInlineAuth=g.useInlineAuth;exports.useAuth=q.useAuth;exports.authPlugin=P;
