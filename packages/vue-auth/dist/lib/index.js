"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const d=require("pinia"),a=require("./src/utils/plugins.js"),g=require("./src/utils/config.js"),q=require("./src/stores/vue-auth.js"),w=require("./src/composables/useInlineAuth.js"),P=require("./src/composables/useAuth.js"),h=require("./src/utils/middlewares.js"),M=t=>{const{router:u,loginRouteName:o,defaultAuthRouteName:c}=t;return{install:l=>{if(g.setAuthConfig(t),!!!d.getActivePinia()){const r=d.createPinia();l.use(r)}const e=q.useAuthStore();u&&u.beforeEach((r,A,i)=>{const m=r.meta.requiresAuth,f=r.meta.requiresGuest,s=o?u.resolve(o):null,n=c?u.resolve(c):null;if(s!=null&&s.name&&m&&!e.isAuthenticated)return i({name:s.name,query:{redirect:r.fullPath}});if(n!=null&&n.name&&f&&e.isAuthenticated)return i({name:n.name,query:{redirect:r.fullPath}});t.middlewares?a.runMiddlewares(t.middlewares,r,A,i,u,{user:e.user,token:e.token,isAuthenticated:e.isAuthenticated}):i()}),e.loadUserFromStorage(t),l.config.globalProperties.$user=e.user,l.config.globalProperties.$isAuthenticated=e.isAuthenticated}}};exports.createCountdown=a.createCountdown;exports.reshapeError=a.reshapeError;exports.runMiddlewares=a.runMiddlewares;exports.useInlineAuth=w.useInlineAuth;exports.useAuth=P.useAuth;exports.authMiddleware=h.authMiddleware;exports.roleMiddleware=h.roleMiddleware;exports.authPlugin=M;
