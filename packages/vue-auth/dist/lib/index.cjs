"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const A=require("pinia"),l=require("./src/utils/plugins.cjs"),w=require("./src/utils/config.cjs"),f=require("./src/stores/vue-auth.cjs"),q=require("./src/composables/useInlineAuth.cjs"),P=require("./src/composables/useAuth.cjs"),d=require("./src/utils/middlewares.cjs"),M=r=>{const{router:u,loginRouteName:o,defaultAuthRouteName:h}=r;return{install:c=>{if(w.setAuthConfig(r),!!!A.getActivePinia()){const t=A.createPinia();c.use(t)}const e=f.useAuthStore(r.storageOptions);u&&(e.$subscribe((t,s)=>{r.resetHandler&&s.refreshed&&(s.refreshed=!1,r.resetHandler(u))}),u.beforeEach((t,s,i)=>{const g=t.meta.requiresAuth,m=t.meta.requiresGuest,n=o?u.resolve(o):null,a=h?u.resolve(h):null;if(n!=null&&n.name&&g&&!e.isAuthenticated)return i({name:n.name,query:{redirect:t.fullPath}});if(a!=null&&a.name&&m&&e.isAuthenticated)return i({name:a.name,query:{redirect:t.fullPath}});r.middlewares?l.runMiddlewares(r.middlewares,t,s,i,u,{user:e.user,token:e.token,isAuthenticated:e.isAuthenticated}):i()})),e.loadUserFromStorage(r,void 0,!0),c.config.globalProperties.$user=e.user,c.config.globalProperties.$isAuthenticated=e.isAuthenticated}}};exports.createCountdown=l.createCountdown;exports.reshapeError=l.reshapeError;exports.runMiddlewares=l.runMiddlewares;exports.useAuthStore=f.useAuthStore;exports.useInlineAuth=q.useInlineAuth;exports.useAuth=P.useAuth;exports.authMiddleware=d.authMiddleware;exports.guestMiddleware=d.guestMiddleware;exports.isCurrent=d.isCurrent;exports.roleMiddleware=d.roleMiddleware;exports.authPlugin=M;
