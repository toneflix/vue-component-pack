"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const h=require("pinia"),i=require("./src/utils/plugins.cjs"),f=require("./src/utils/config.cjs"),A=require("./src/stores/vue-auth.cjs"),q=require("./src/composables/useInlineAuth.cjs"),P=require("./src/composables/useAuth.cjs"),l=require("./src/utils/middlewares.cjs"),M=t=>{const{router:u,loginRouteName:o,defaultAuthRouteName:c}=t;return{install:d=>{if(f.setAuthConfig(t),!!!h.getActivePinia()){const r=h.createPinia();d.use(r)}const e=A.useAuthStore(t.storageOptions);u&&u.beforeEach((r,g,s)=>{const m=r.meta.requiresAuth,w=r.meta.requiresGuest,n=o?u.resolve(o):null,a=c?u.resolve(c):null;if(n!=null&&n.name&&m&&!e.isAuthenticated)return s({name:n.name,query:{redirect:r.fullPath}});if(a!=null&&a.name&&w&&e.isAuthenticated)return s({name:a.name,query:{redirect:r.fullPath}});t.middlewares?i.runMiddlewares(t.middlewares,r,g,s,u,{user:e.user,token:e.token,isAuthenticated:e.isAuthenticated}):s()}),e.loadUserFromStorage(t,void 0,!0),d.config.globalProperties.$user=e.user,d.config.globalProperties.$isAuthenticated=e.isAuthenticated}}};exports.buildHeaders=i.buildHeaders;exports.createCountdown=i.createCountdown;exports.reshapeError=i.reshapeError;exports.runMiddlewares=i.runMiddlewares;exports.useAuthStore=A.useAuthStore;exports.useInlineAuth=q.useInlineAuth;exports.useAuth=P.useAuth;exports.authMiddleware=l.authMiddleware;exports.guestMiddleware=l.guestMiddleware;exports.isCurrent=l.isCurrent;exports.roleMiddleware=l.roleMiddleware;exports.authPlugin=M;
