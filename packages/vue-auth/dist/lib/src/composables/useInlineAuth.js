"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const n=require("vue"),m=require("../config.js"),d=require("../stores/auth.js"),p=require("pinia"),F=()=>{const f=d.createAuthStore()(),v=l=>{const g=n.ref(),s=n.ref();return{send:async()=>{const t=await l();return t.error&&g.value?g.value(t.error):!t.error&&s.value&&s.value(t),t},onError:t=>{g.value=t},onSuccess:t=>{s.value=t}}},h=(l,g=m.getAuthConfig())=>{const s=n.ref(),u=n.ref(),c=n.ref(),a=n.ref(),t=async()=>{const e=await f.login(l,g);s.value=e.user,u.value=e.error,c.value=e.token,a.value=e.message;const S={user:e.user,message:e.message,token:e.token};return e.error&&(S.error=e.error),S},{send:i,onError:o,onSuccess:r}=v(t);return{send:i,user:s,token:c,error:u,message:a,onError:o,onSuccess:r}},k=(l,g=m.getAuthConfig())=>{const s=n.ref(),u=n.ref(),c=n.ref(),a=n.ref(),t=async()=>{const e=await f.register(l,g);return s.value=e.user,u.value=e.error,c.value=e.token,a.value=e.message,{user:e.user,error:e.error,token:e.token,message:e.message}},{send:i,onError:o,onSuccess:r}=v(t);return{send:i,user:s,token:c,error:u,message:a,onError:o,onSuccess:r}},A=(l=m.getAuthConfig(),g)=>{const s=n.ref(),u=n.ref(),c=async()=>{const o=await f.logout(l,g);return s.value=o==null?void 0:o.error,u.value=o==null?void 0:o.message,{error:o==null?void 0:o.error,message:o==null?void 0:o.message}},{send:a,onError:t,onSuccess:i}=v(c);return{send:a,error:s,message:u,onError:t,onSuccess:i}},w=(l,g=m.getAuthConfig())=>{const s=n.ref(),u=n.ref(),c=n.ref(),a=n.ref(0),t=async()=>{const e=await f.forgot(l,g);return s.value=e==null?void 0:e.error,u.value=e==null?void 0:e.message,c.value=e.timeout,m.createCountdown(c,S=>{a.value=S}),{error:e.error,message:e.message,timeout:e.timeout,countdown:a.value}},{send:i,onError:o,onSuccess:r}=v(t);return{send:i,error:s,message:u,timeout:c,onError:o,onSuccess:r,countdown:a}},C=(l,g=m.getAuthConfig())=>{const s=n.ref(),u=n.ref(),c=n.ref(),a=async()=>{const r=await f.reset(l,g);return s.value=r.user,u.value=r==null?void 0:r.error,c.value=r==null?void 0:r.message,{error:r.error,message:r.message,user:s.value}},{send:t,onError:i,onSuccess:o}=v(a);return{send:t,user:s,error:u,message:c,onError:i,onSuccess:o}},y=(l=m.getAuthConfig(),g)=>{const s=n.ref(),u=n.ref(),c=n.ref(),a=async()=>{const r=await f.loadUserFromStorage(l,g);return s.value=r.user,u.value=r==null?void 0:r.error,c.value=r==null?void 0:r.message,{error:r.error,message:r.message,user:s.value}},{send:t,onError:i,onSuccess:o}=v(a);return{send:t,user:s,error:u,message:c,onError:i,onSuccess:o}},{user:E,token:b,isAuthenticated:q}=p.storeToRefs(f);return{user:E,token:b,isAuthenticated:q,reset:C,login:h,logout:A,forgot:w,register:k,loadUserFromStorage:y}};exports.useInlineAuth=F;
