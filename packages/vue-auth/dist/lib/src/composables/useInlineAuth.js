"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const n=require("vue"),m=require("../config.js"),b=require("../stores/auth.js"),S=require("pinia"),d=()=>{const f=b.createAuthStore()(),v=i=>{const g=n.ref(),s=n.ref();return{send:async()=>{const t=await i();return t.error&&g.value?g.value(t.error):!t.error&&s.value&&s.value(t),t},onError:t=>{g.value=t},onSuccess:t=>{s.value=t}}},A=(i,g=m.getAuthConfig())=>{const s=n.ref(),u=n.ref(),c=n.ref(),a=n.ref(),t=async()=>{const e=await f.login(i,g);s.value=e.user,u.value=e.error,c.value=e.token,a.value=e.message;const h={user:e.user,message:e.message,token:e.token};return e.error&&(h.error=e.error),h},{send:l,onError:o,onSuccess:r}=v(t);return{send:l,user:s,token:c,error:u,message:a,onError:o,onSuccess:r}},k=(i,g=m.getAuthConfig())=>{const s=n.ref(),u=n.ref(),c=n.ref(),a=n.ref(),t=async()=>{const e=await f.register(i,g);return s.value=e.user,u.value=e.error,c.value=e.token,a.value=e.message,{user:e.user,error:e.error,token:e.token,message:e.message}},{send:l,onError:o,onSuccess:r}=v(t);return{send:l,user:s,token:c,error:u,message:a,onError:o,onSuccess:r}},w=(i=m.getAuthConfig(),g)=>{const s=n.ref(),u=n.ref(),c=async()=>{const o=await f.logout(i,g);return s.value=o==null?void 0:o.error,u.value=o==null?void 0:o.message,{error:o==null?void 0:o.error,message:o==null?void 0:o.message}},{send:a,onError:t,onSuccess:l}=v(c);return{send:a,error:s,message:u,onError:t,onSuccess:l}},C=(i,g=m.getAuthConfig())=>{const s=n.ref(),u=n.ref(),c=n.ref(),a=n.ref(0),t=async()=>{const e=await f.forgot(i,g);return s.value=e==null?void 0:e.error,u.value=e==null?void 0:e.message,c.value=e.timeout,m.createCountdown(c,h=>{a.value=h}),{error:e.error,message:e.message,timeout:e.timeout,countdown:a.value}},{send:l,onError:o,onSuccess:r}=v(t);return{send:l,error:s,message:u,timeout:c,onError:o,onSuccess:r,countdown:a}},y=(i,g=m.getAuthConfig())=>{const s=n.ref(),u=n.ref(),c=n.ref(),a=async()=>{const r=await f.reset(i,g);return s.value=r.user,u.value=r==null?void 0:r.error,c.value=r==null?void 0:r.message,{error:r.error,message:r.message,user:s.value}},{send:t,onError:l,onSuccess:o}=v(a);return{send:t,user:s,error:u,message:c,onError:l,onSuccess:o}},E=(i=m.getAuthConfig(),g)=>{const s=n.ref(),u=n.ref(),c=n.ref(),a=async()=>{const r=await f.loadUserFromStorage(i,g);return s.value=r.user,u.value=r==null?void 0:r.error,c.value=r==null?void 0:r.message,{error:r.error,message:r.message,user:s.value}},{send:t,onError:l,onSuccess:o}=v(a);return{send:t,user:s,error:u,message:c,onError:l,onSuccess:o}};return{user:S.storeToRefs(f).user,isAuthenticated:S.storeToRefs(f).isAuthenticated,reset:y,login:A,logout:w,forgot:C,register:k,loadUserFromStorage:E}};exports.useInlineAuth=d;
