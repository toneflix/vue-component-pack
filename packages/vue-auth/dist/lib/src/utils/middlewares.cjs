"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const g=(r,e)=>JSON.stringify(r)===JSON.stringify(e),n=(r,e,t)=>{try{const s=t?t.resolve(e):e;return s?typeof s=="string"?r.path===s:r.path===s.path&&g(r.query,s.query):!1}catch{return!1}},m=r=>(e,t,s,i,u)=>{if(!i.isAuthenticated&&!n(e,r,u)&&e.meta.requiresAuth)return s(r);s()},o=r=>(e,t,s,i,u)=>{if(i.isAuthenticated&&!n(e,r,u)&&e.meta.requiresGuest)return s(r);s()},y=(r,e,t="roles",s="requiresAdmin")=>(i,u,d,a,l)=>{if(!a.user[t])return d();const f=Array.isArray(a.user[t])?a.user[t]:[String(a.user[t])],h=typeof e=="string"?[e]:e;if(!f.some(c=>h.includes(c))&&!n(i,r,l)&&i.meta[s])return d(r);d()};exports.authMiddleware=m;exports.guestMiddleware=o;exports.isCurrent=n;exports.roleMiddleware=y;
