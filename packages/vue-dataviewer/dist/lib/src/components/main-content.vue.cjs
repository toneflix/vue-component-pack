"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue");;/* empty css                    */const i=require("../utils/providers.cjs"),h=require("./TBtn.vue.cjs"),N=require("./dialog/TCard.vue.cjs"),$=require("./TInnerLoading.vue.cjs"),D=require("@toneflix/vue-forms"),P=require("date-fns"),q={class:"flex items-center justify-between no-wrap"},L={class:"card-title"},j={key:1},F=["onClick"],z={class:"t-item-section t-item-section-avatar"},T={class:"t-avatar"},A=["src","alt"],O={class:"t-item-section"},U={class:"t-item-label caption"},I={key:0,class:"t-item-label"},R={key:1,class:"t-item-label"},_={key:2,class:"image-viewer"},Z=["src","alt"],G=e.defineComponent({name:"MainContent",__name:"main-content",props:e.mergeModels({dialogMode:{type:Boolean},listClass:{},dialogClass:{},dialogZIndex:{},exclusions:{default:()=>["id"]},formExclusions:{default:()=>["id","imageUrl"]},booleanLabels:{},rounded:{type:Boolean},bordered:{type:Boolean},separator:{type:Boolean},shadow:{type:Boolean},dateProps:{},imageProps:{default:()=>["imageUrl"]},dateFormat:{default:"do MMM, yyyy h:mm a"},labelsMap:{},valuesMap:{},titles:{},contentClass:{},data:{},form:{},formProps:{},mode:{},errors:{},saving:{type:Boolean},loading:{type:Boolean}},{data:{required:!0},dataModifiers:{},form:{required:!1},formModifiers:{},mode:{default:"view"},modeModifiers:{},loading:{type:Boolean,default:!1},loadingModifiers:{},saving:{type:Boolean,default:!1},savingModifiers:{},errors:{default:{}},errorsModifiers:{}}),emits:e.mergeModels(["updateData","click:save","toggleDialog"],["update:data","update:form","update:mode","update:loading","update:saving","update:errors"]),setup(c,{emit:B}){const f=B,r=c,o=e.useModel(c,"data"),v=e.useModel(c,"form"),u=e.useModel(c,"mode"),y=e.useModel(c,"loading"),M=e.useModel(c,"saving"),b=e.useModel(c,"errors"),g=e.ref(),E=e.ref(!1),S=e.computed(()=>{var a,l,s;const t={view:((a=r.titles)==null?void 0:a.view)||"view Data",edit:((l=r.titles)==null?void 0:l.edit)||"Edit Data",doc:((s=r.titles)==null?void 0:s.doc)||"View Docs"};return{view:t==null?void 0:t.view,edit:t==null?void 0:t.edit,doc:t==null?void 0:t.doc}[u.value||"view"]}),k=e.computed(()=>o.value?Object.entries(o.value).filter(t=>r.imageProps.includes(t[0])?!1:u.value==="edit"?![...r.exclusions,...r.formExclusions].includes(t[0]):!r.exclusions.includes(t[0])):[]),V=e.computed(()=>k.value.map(([t,a])=>({col:12,name:t,type:typeof a=="boolean"?"radio":"text",label:i.titleCase(i.slug(t," ")),choices:[{label:"Accept",value:!0},{label:"Reject",value:!0}]}))),d=(t,a="view",l)=>{if(E.value=!0,l)u.value="doc",g.value={alt:l,src:o.value[l]};else{o.value=t,u.value=a;const s=Object.fromEntries(Object.entries(t).map(([n,m])=>[i.slug(n),p(m)]));f("updateData",s,a)}},w=(t,a)=>{var l,s,n;return(l=r.booleanLabels)!=null&&l[t]?a?(s=r.booleanLabels)==null?void 0:s[t][0]:(n=r.booleanLabels)==null?void 0:n[t][1]:a?"Active":"Inactive"},p=(t,a)=>{var l,s,n;return a&&((l=r.valuesMap)!=null&&l[a])&&(t=(s=r.valuesMap)==null?void 0:s[a]),a&&((n=r.dateProps)!=null&&n.includes(a))?P.formatDate(t,r.dateFormat):typeof t=="boolean"?Number(t):typeof t=="function"?t(o.value):Array.isArray(t)&&t.every(m=>typeof m=="string")&&u.value==="view"?i.titleCase(t.join(", ")):t};return e.watch(u,t=>{t!=="doc"&&(g.value=void 0)}),(t,a)=>(e.openBlock(),e.createBlock(N.default,{class:e.normalizeClass([{"t-card-border":t.bordered,"t-card-shadow":t.shadow,"t-card-rounded":t.rounded},t.contentClass])},{header:e.withCtx(()=>[e.renderSlot(t.$slots,"header",{},()=>[e.createElementVNode("div",q,[e.createElementVNode("div",L,e.toDisplayString(S.value),1),t.dialogMode?(e.openBlock(),e.createElementBlock("button",{key:0,class:"close-btn",onClick:a[0]||(a[0]=l=>t.$emit("toggleDialog",!1))}," Ã— ")):e.createCommentVNode("",!0)])])]),default:e.withCtx(()=>[e.createElementVNode("div",null,[u.value==="edit"&&v.value?(e.openBlock(),e.createBlock(e.unref(D.VueForms),e.mergeProps({key:0,rounded:"","show-group-labels":"",class:"p-4 m-4 mx-auto"},t.formProps,{modelValue:v.value,"onUpdate:modelValue":a[1]||(a[1]=l=>v.value=l),fields:V.value,loading:M.value,onCancel:a[2]||(a[2]=l=>u.value="view"),onSubmit:a[3]||(a[3]=l=>f("click:save",o.value))}),e.createSlots({_:2},[t.$slots["form-prepend"]?{name:"prepend",fn:e.withCtx(()=>[e.renderSlot(t.$slots,"form-prepend",{form:v.value,errors:b.value,data:o.value})]),key:"0"}:void 0,t.$slots["form-append"]?{name:"default",fn:e.withCtx(()=>[e.renderSlot(t.$slots,"form-append",{form:v.value,errors:b.value,data:o.value})]),key:"1"}:void 0,e.renderList(e.unref(i.formSlotNames),l=>({name:l,fn:e.withCtx(s=>[e.renderSlot(t.$slots,l,e.normalizeProps(e.guardReactiveProps(s)))])}))]),1040,["modelValue","fields","loading"])):(u.value==="view"||!v.value)&&o.value?(e.openBlock(),e.createElementBlock("div",j,[e.createElementVNode("div",{class:e.normalizeClass(["t-list",t.listClass]),separator:""},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.imageProps,l=>e.renderSlot(t.$slots,"img-list-item",{toggle:()=>d(o.value,"doc",l),field:l,label:e.unref(i.titleCase)(l),value:String(o.value[l]),key:l},()=>[o.value[l]?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["t-item clickable",{"t-item-separator":t.separator}]),onClick:s=>d(o.value,"doc",l)},[e.createElementVNode("div",z,[e.renderSlot(t.$slots,"image",{src:o.value[l]},()=>[e.createElementVNode("div",T,[e.createElementVNode("img",{src:o.value[l],alt:e.unref(i.titleCase)(l)},null,8,A)])])]),a[5]||(a[5]=e.createElementVNode("div",{class:"t-item-section"},[e.createElementVNode("div",{class:"t-item-label"},"Click to expand")],-1))],10,F)):e.createCommentVNode("",!0)])),128)),e.renderSlot(t.$slots,"list-prepend",{data:o.value,toggle:l=>d(o.value,l)}),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(k.value,l=>{var s;return e.renderSlot(t.$slots,"list-item",{key:l[0],field:l[0],label:((s=t.labelsMap)==null?void 0:s[l[0]])??e.unref(i.titleCase)(l[0]),value:typeof l[1]=="boolean"?w(e.unref(i.slug)(l[0]),l[1]):p(l[1],l[0])},()=>{var n;return[e.createElementVNode("div",{class:e.normalizeClass(["t-item",{"t-item-separator":t.separator}])},[e.createElementVNode("div",O,[e.createElementVNode("div",U,e.toDisplayString(((n=t.labelsMap)==null?void 0:n[l[0]])??e.unref(i.titleCase)(l[0])),1),typeof l[1]=="boolean"?(e.openBlock(),e.createElementBlock("div",I,[e.createElementVNode("div",{class:e.normalizeClass(["t-chip t-chip-square",l[1]?"t-chip-green":"t-chip-red"])},e.toDisplayString(w(e.unref(i.slug)(l[0]),l[1])),3)])):(e.openBlock(),e.createElementBlock("div",R,e.toDisplayString(p(l[1],l[0])),1))])],2)]})}),128)),e.renderSlot(t.$slots,"list-append",{data:o.value,toggle:l=>d(o.value,l)})],2),e.renderSlot(t.$slots,"list-after",{data:o.value,toggle:l=>d(o.value,l)})])):o.value?(e.openBlock(),e.createElementBlock("div",_,[e.renderSlot(t.$slots,"image-viewer",{close:()=>d(o.value,"view"),src:o.value.imageUrl},()=>{var l,s,n,m,C;return[e.createVNode(h.default,{dense:"",color:"primary",label:"Return",icon:"fas fa-arrow-left",onClick:a[4]||(a[4]=H=>d(o.value,"view"))}),(l=g.value)!=null&&l.src||o.value[((s=t.imageProps)==null?void 0:s[0])??0]?(e.openBlock(),e.createElementBlock("img",{key:0,style:{width:"100%"},src:String(((n=g.value)==null?void 0:n.src)||o.value[((m=t.imageProps)==null?void 0:m[0])??0]),alt:e.unref(i.titleCase)(((C=g.value)==null?void 0:C.alt)||"Document")},null,8,Z)):e.createCommentVNode("",!0)]})])):e.createCommentVNode("",!0)]),e.renderSlot(t.$slots,"loader",{loading:y.value},()=>[e.createVNode($.default,{showing:y.value},null,8,["showing"])]),e.renderSlot(t.$slots,"footer",{data:o.value,mode:u.value,toggle:l=>d(o.value,l)})]),_:3},8,["class"]))}});exports.default=G;
