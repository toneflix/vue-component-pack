"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue");;/* empty css                    */const i=require("../utils/providers.cjs"),S=require("./TBtn.vue.cjs"),N=require("./dialog/TCard.vue.cjs"),$=require("./TInnerLoading.vue.cjs"),D=require("@toneflix/vue-forms"),P=require("date-fns"),q={class:"flex items-center justify-between no-wrap"},L={class:"card-title"},j={key:1},F=["onClick"],z={class:"t-item-section t-item-section-avatar"},T={class:"t-avatar"},_=["src","alt"],A={class:"t-item-section"},O={class:"t-item-label caption"},U={key:0,class:"t-item-label"},I={key:1,class:"t-item-label"},R={key:2,class:"image-viewer"},Z=["src","alt"],G=e.defineComponent({name:"MainContent",__name:"main-content",props:e.mergeModels({dialogMode:{type:Boolean},listClass:{},dialogZIndex:{},exclusions:{default:()=>["id"]},formExclusions:{default:()=>["id","imageUrl"]},booleanLabels:{},rounded:{type:Boolean},bordered:{type:Boolean},separator:{type:Boolean},shadow:{type:Boolean},dateProps:{},imageProps:{default:()=>["imageUrl"]},dateFormat:{default:"do MMM, yyyy h:mm a"},labelsMap:{},valuesMap:{},titles:{},data:{},form:{},formProps:{},mode:{},errors:{},saving:{type:Boolean},loading:{type:Boolean}},{data:{required:!0},dataModifiers:{},form:{required:!1},formModifiers:{},mode:{default:"view"},modeModifiers:{},loading:{type:Boolean,default:!1},loadingModifiers:{},saving:{type:Boolean,default:!1},savingModifiers:{},errors:{default:{}},errorsModifiers:{}}),emits:e.mergeModels(["updateData","click:save","toggleDialog"],["update:data","update:form","update:mode","update:loading","update:saving","update:errors"]),setup(d,{emit:C}){const f=C,s=d,a=e.useModel(d,"data"),v=e.useModel(d,"form"),u=e.useModel(d,"mode"),y=e.useModel(d,"loading"),M=e.useModel(d,"saving"),b=e.useModel(d,"errors"),p=e.ref(),E=e.ref(!1),V=e.computed(()=>{var o,l,r;const t={view:((o=s.titles)==null?void 0:o.view)||"view Data",edit:((l=s.titles)==null?void 0:l.edit)||"Edit Data",doc:((r=s.titles)==null?void 0:r.doc)||"View Docs"};return{view:t==null?void 0:t.view,edit:t==null?void 0:t.edit,doc:t==null?void 0:t.doc}[u.value||"view"]}),k=e.computed(()=>a.value?Object.entries(a.value).filter(t=>s.imageProps.includes(t[0])?!1:u.value==="edit"?![...s.exclusions,...s.formExclusions].includes(t[0]):!s.exclusions.includes(t[0])):[]),h=e.computed(()=>k.value.map(([t,o])=>({col:12,name:t,type:typeof o=="boolean"?"radio":"text",label:i.titleCase(i.slug(t," ")),choices:[{label:"Accept",value:!0},{label:"Reject",value:!0}]}))),c=(t,o="view",l)=>{if(E.value=!0,l)u.value="doc",p.value={alt:l,src:a.value[l]};else{a.value=t,u.value=o;const r=Object.fromEntries(Object.entries(t).map(([n,m])=>[i.slug(n),g(m)]));f("updateData",r,o)}},w=(t,o)=>{var l,r,n;return(l=s.booleanLabels)!=null&&l[t]?o?(r=s.booleanLabels)==null?void 0:r[t][0]:(n=s.booleanLabels)==null?void 0:n[t][1]:o?"Active":"Inactive"},g=(t,o)=>{var l,r,n;return o&&((l=s.valuesMap)!=null&&l[o])&&(t=(r=s.valuesMap)==null?void 0:r[o]),o&&((n=s.dateProps)!=null&&n.includes(o))?P.formatDate(t,s.dateFormat):typeof t=="boolean"?Number(t):typeof t=="function"?t(a.value):Array.isArray(t)&&t.every(m=>typeof m=="string")&&u.value==="view"?i.titleCase(t.join(", ")):t};return e.watch(u,t=>{t!=="doc"&&(p.value=void 0)}),(t,o)=>(e.openBlock(),e.createBlock(N.default,{class:e.normalizeClass({"t-card-border":t.bordered,"t-card-shadow":t.shadow,"t-card-rounded":t.rounded})},{header:e.withCtx(()=>[e.renderSlot(t.$slots,"header",{},()=>[e.createElementVNode("div",q,[e.createElementVNode("div",L,e.toDisplayString(V.value),1),t.dialogMode?(e.openBlock(),e.createElementBlock("button",{key:0,class:"close-btn",onClick:o[0]||(o[0]=l=>t.$emit("toggleDialog",!1))}," Ã— ")):e.createCommentVNode("",!0)])])]),default:e.withCtx(()=>[e.createElementVNode("div",null,[u.value==="edit"&&v.value?(e.openBlock(),e.createBlock(e.unref(D.VueForms),e.mergeProps({key:0,rounded:"","show-group-labels":"",class:"p-4 m-4 mx-auto"},t.formProps,{modelValue:v.value,"onUpdate:modelValue":o[1]||(o[1]=l=>v.value=l),fields:h.value,loading:M.value,onCancel:o[2]||(o[2]=l=>u.value="view"),onSubmit:o[3]||(o[3]=l=>f("click:save",a.value))}),e.createSlots({_:2},[t.$slots["form-prepend"]?{name:"prepend",fn:e.withCtx(()=>[e.renderSlot(t.$slots,"form-prepend",{form:v.value,errors:b.value,data:a.value})]),key:"0"}:void 0,t.$slots["form-append"]?{name:"default",fn:e.withCtx(()=>[e.renderSlot(t.$slots,"form-append",{form:v.value,errors:b.value,data:a.value})]),key:"1"}:void 0,e.renderList(e.unref(i.formSlotNames),l=>({name:l,fn:e.withCtx(r=>[e.renderSlot(t.$slots,l,e.normalizeProps(e.guardReactiveProps(r)))])}))]),1040,["modelValue","fields","loading"])):(u.value==="view"||!v.value)&&a.value?(e.openBlock(),e.createElementBlock("div",j,[e.createElementVNode("div",{class:e.normalizeClass(["t-list",t.listClass]),separator:""},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.imageProps,l=>e.renderSlot(t.$slots,"img-list-item",{toggle:()=>c(a.value,"doc",l),field:l,label:e.unref(i.titleCase)(l),value:String(a.value[l]),key:l},()=>[a.value[l]?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["t-item clickable",{"t-item-separator":t.separator}]),onClick:r=>c(a.value,"doc",l)},[e.createElementVNode("div",z,[e.renderSlot(t.$slots,"image",{src:a.value[l]},()=>[e.createElementVNode("div",T,[e.createElementVNode("img",{src:a.value[l],alt:e.unref(i.titleCase)(l)},null,8,_)])])]),o[5]||(o[5]=e.createElementVNode("div",{class:"t-item-section"},[e.createElementVNode("div",{class:"t-item-label"},"Click to expand")],-1))],10,F)):e.createCommentVNode("",!0)])),128)),e.renderSlot(t.$slots,"list-prepend",{data:a.value,toggle:l=>c(a.value,l)}),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(k.value,l=>{var r;return e.renderSlot(t.$slots,"list-item",{key:l[0],field:l[0],label:((r=t.labelsMap)==null?void 0:r[l[0]])??e.unref(i.titleCase)(l[0]),value:typeof l[1]=="boolean"?w(e.unref(i.slug)(l[0]),l[1]):g(l[1],l[0])},()=>{var n;return[e.createElementVNode("div",{class:e.normalizeClass(["t-item",{"t-item-separator":t.separator}])},[e.createElementVNode("div",A,[e.createElementVNode("div",O,e.toDisplayString(((n=t.labelsMap)==null?void 0:n[l[0]])??e.unref(i.titleCase)(l[0])),1),typeof l[1]=="boolean"?(e.openBlock(),e.createElementBlock("div",U,[e.createElementVNode("div",{class:e.normalizeClass(["t-chip t-chip-square",l[1]?"t-chip-green":"t-chip-red"])},e.toDisplayString(w(e.unref(i.slug)(l[0]),l[1])),3)])):(e.openBlock(),e.createElementBlock("div",I,e.toDisplayString(g(l[1],l[0])),1))])],2)]})}),128)),e.renderSlot(t.$slots,"list-append",{data:a.value,toggle:l=>c(a.value,l)})],2),e.renderSlot(t.$slots,"list-after",{data:a.value,toggle:l=>c(a.value,l)})])):a.value?(e.openBlock(),e.createElementBlock("div",R,[e.renderSlot(t.$slots,"image-viewer",{close:()=>c(a.value,"view"),src:a.value.imageUrl},()=>{var l,r,n,m,B;return[e.createVNode(S.default,{dense:"",color:"primary",label:"Return",icon:"fas fa-arrow-left",onClick:o[4]||(o[4]=H=>c(a.value,"view"))}),(l=p.value)!=null&&l.src||a.value[((r=t.imageProps)==null?void 0:r[0])??0]?(e.openBlock(),e.createElementBlock("img",{key:0,style:{width:"100%"},src:String(((n=p.value)==null?void 0:n.src)||a.value[((m=t.imageProps)==null?void 0:m[0])??0]),alt:e.unref(i.titleCase)(((B=p.value)==null?void 0:B.alt)||"Document")},null,8,Z)):e.createCommentVNode("",!0)]})])):e.createCommentVNode("",!0)]),e.renderSlot(t.$slots,"loader",{loading:y.value},()=>[e.createVNode($.default,{showing:y.value},null,8,["showing"])])]),_:3},8,["class"]))}});exports.default=G;
