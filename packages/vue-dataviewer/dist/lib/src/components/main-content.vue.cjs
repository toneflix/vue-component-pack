"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),E=require("dayjs"),n=require("../utils/providers.cjs"),V=require("./TBtn.vue.cjs"),D=require("./dialog/TCard.vue.cjs"),C=require("./TInnerLoading.vue.cjs"),N=require("@toneflix/vue-forms"),_={class:"flex items-center justify-between"},h={class:"card-title"},S={key:1},$={class:"t-list",separator:""},q={class:"t-item-section avatar"},A={class:"t-avatar"},j=["src"],L={class:"t-item-section"},U={class:"t-item-label caption"},T={key:0,class:"t-item-label"},O={key:1,class:"t-item-label"},Y={key:2,class:"img-preview"},F=["src"],x=e.defineComponent({name:"MainContent",__name:"main-content",props:e.mergeModels({titles:{default:()=>({view:"view Data",edit:"Edit Data",doc:"View Docs"})},dialogMode:{type:Boolean},exclusions:{default:()=>["id","user","imageUrl","createdAt","updatedAt"]},formExclusions:{default:()=>["id","user","imageUrl","createdAt","updatedAt"]},booleanLabels:{}},{data:{},dataModifiers:{},form:{default:{}},formModifiers:{},mode:{default:"view"},modeModifiers:{},loading:{type:Boolean,default:!1},loadingModifiers:{},saving:{type:Boolean,default:!1},savingModifiers:{},errors:{default:{}},errorsModifiers:{}}),emits:e.mergeModels(["updateData","click:save","toggleDialog"],["update:data","update:form","update:mode","update:loading","update:saving","update:errors"]),setup(s,{emit:y}){const m=y,a=e.useModel(s,"data"),u=e.useModel(s,"form"),i=s,r=e.useModel(s,"mode"),b=e.useModel(s,"loading"),w=e.useModel(s,"saving"),v=e.useModel(s,"errors"),p=e.ref(!1),f=e.computed(()=>a.value?Object.entries(a.value).filter(t=>r.value==="edit"?![...i.exclusions,...i.formExclusions].includes(t[0]):!i.exclusions.includes(t[0])):[]),B=e.computed(()=>f.value.map(([t,o])=>({col:12,name:t,type:typeof o=="boolean"?"radio":"text",label:n.titleCase(n.slug(t," ")),choices:[{label:"Accept",value:!0},{label:"Reject",value:!0}]}))),g=(t,o="view")=>{a.value=t,r.value=o,p.value=!0;const l=Object.fromEntries(Object.entries(t).map(([d,c])=>[n.slug(d),k(c)]));m("updateData",l,o)},M=(t,o)=>{var l,d,c;return(l=i.booleanLabels)!=null&&l[t]?o?(d=i.booleanLabels)==null?void 0:d[t][0]:(c=i.booleanLabels)==null?void 0:c[t][1]:o?"Active":"Inactive"},k=(t,o)=>o&&o.includes("edAt",o.length-4)?E(String(t)).format("Do MMM, YYYY h:MM A"):typeof t=="boolean"?Number(t):Array.isArray(t)&&t.every(l=>typeof l=="string")&&r.value==="view"?n.titleCase(t.join(", ")):t;return(t,o)=>(e.openBlock(),e.createBlock(D.default,null,{header:e.withCtx(()=>[e.renderSlot(t.$slots,"header",{},()=>[e.createElementVNode("div",_,[e.createElementVNode("div",h,e.toDisplayString({view:t.titles.view,edit:t.titles.edit,doc:t.titles.doc}[r.value||"view"]),1),t.dialogMode?(e.openBlock(),e.createElementBlock("button",{key:0,class:"close-btn",onClick:o[0]||(o[0]=l=>t.$emit("toggleDialog",p.value))}," Ã— ")):e.createCommentVNode("",!0)])])]),default:e.withCtx(()=>[e.createElementVNode("div",null,[r.value==="edit"?(e.openBlock(),e.createBlock(e.unref(N.VueForms),{key:0,rounded:"","show-group-labels":"",class:"p-4 m-4 mx-auto",fields:B.value,loading:w.value,modelValue:u.value,"onUpdate:modelValue":o[1]||(o[1]=l=>u.value=l),onCancel:o[2]||(o[2]=l=>r.value="view"),onSubmit:o[3]||(o[3]=l=>m("click:save",a.value))},e.createSlots({_:2},[t.$slots["form-prepend"]?{name:"prepend",fn:e.withCtx(()=>[e.renderSlot(t.$slots,"form-prepend",{form:u.value,errors:v.value,viewData:a.value})]),key:"0"}:void 0,t.$slots["form-append"]?{name:"default",fn:e.withCtx(()=>[e.renderSlot(t.$slots,"form-append",{form:u.value,errors:v.value,viewData:a.value})]),key:"1"}:void 0]),1032,["fields","loading","modelValue"])):r.value==="view"&&a.value?(e.openBlock(),e.createElementBlock("div",S,[e.createElementVNode("div",$,[a.value.imageUrl?(e.openBlock(),e.createElementBlock("div",{key:0,class:"q-my-sm t-item clickable",onClick:o[4]||(o[4]=l=>g(a.value,"doc"))},[e.createElementVNode("div",q,[e.createElementVNode("div",A,[e.createElementVNode("img",{src:a.value.imageUrl,alt:"Document"},null,8,j)])]),o[6]||(o[6]=e.createElementVNode("div",{class:"t-item-section"},[e.createElementVNode("div",{class:"t-item-label"},"Click to expand")],-1))])):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(f.value,l=>(e.openBlock(),e.createElementBlock("div",{class:"q-my-sm t-item",key:l[0]},[e.createElementVNode("div",L,[e.createElementVNode("div",U,e.toDisplayString(e.unref(n.titleCase)(e.unref(n.slug)(l[0]))),1),typeof l[1]=="boolean"?(e.openBlock(),e.createElementBlock("div",T,[e.createElementVNode("div",{class:e.normalizeClass(["t-chip t-chip-square",l[1]?"t-chip-green":"t-chip-red"])},e.toDisplayString(M(e.unref(n.slug)(l[0]),l[1])),3)])):(e.openBlock(),e.createElementBlock("div",O,e.toDisplayString(k(l[1],l[0])),1))])]))),128)),e.renderSlot(t.$slots,"list-append",{viewData:a.value})]),e.renderSlot(t.$slots,"list-after",{viewData:a.value})])):a.value?(e.openBlock(),e.createElementBlock("div",Y,[e.createVNode(V.default,{dense:"",color:"primary",label:"Return",icon:"fas fa-arrow-left",onClick:o[5]||(o[5]=l=>g(a.value,"view"))}),a.value.imageUrl?(e.openBlock(),e.createElementBlock("img",{key:0,style:{width:"100%"},src:a.value.imageUrl,alt:"Document"},null,8,F)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)]),e.createVNode(C.default,{showing:b.value},null,8,["showing"])]),_:3}))}});exports.default=x;
