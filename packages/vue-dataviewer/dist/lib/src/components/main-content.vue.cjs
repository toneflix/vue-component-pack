"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue");;/* empty css                    */const i=require("../utils/providers.cjs"),D=require("./TBtn.vue.cjs"),P=require("./dialog/TCard.vue.cjs"),q=require("./TInnerLoading.vue.cjs"),F=require("@toneflix/vue-forms"),L=require("date-fns"),j={class:"flex items-center justify-between no-wrap"},z={class:"card-title"},T={key:1},O=["onClick"],A={class:"t-item-section t-item-section-avatar"},U={class:"t-avatar"},_=["src","alt"],I={class:"t-item-section"},K={class:"t-item-label caption"},R={key:0,class:"t-item-label"},Z={key:1,class:"t-item-label"},G={key:2,class:"image-viewer"},H=["src","alt"],J=e.defineComponent({name:"MainContent",__name:"main-content",props:e.mergeModels({dialogMode:{type:Boolean},listClass:{},dialogClass:{},dialogZIndex:{},exclusions:{default:()=>["id"]},formExclusions:{default:()=>["id","imageUrl"]},booleanLabels:{},rounded:{type:Boolean},bordered:{type:Boolean},separator:{type:Boolean},shadow:{type:Boolean},dateProps:{},imageProps:{default:()=>["imageUrl"]},dateFormat:{default:"do MMM, yyyy h:mm a"},labelsMap:{},valuesMap:{},titles:{},contentClass:{},data:{},form:{},formProps:{},slugifyFormKeys:{type:Boolean},mode:{},errors:{},saving:{type:Boolean},loading:{type:Boolean}},{data:{required:!0},dataModifiers:{},form:{required:!1},formModifiers:{},mode:{default:"view"},modeModifiers:{},loading:{type:Boolean,default:!1},loadingModifiers:{},saving:{type:Boolean,default:!1},savingModifiers:{},errors:{default:{}},errorsModifiers:{}}),emits:e.mergeModels(["setData","click:save","toggleDialog"],["update:data","update:form","update:mode","update:loading","update:saving","update:errors"]),setup(v,{expose:h,emit:S}){const f=S,r=v,a=e.useModel(v,"data"),d=e.useModel(v,"form"),u=e.useModel(v,"mode"),b=e.useModel(v,"loading"),k=e.useModel(v,"saving"),w=e.useModel(v,"errors"),g=e.ref(),V=e.ref(!1),$=e.computed(()=>{var o,l,s;const t={view:((o=r.titles)==null?void 0:o.view)||"view Data",edit:((l=r.titles)==null?void 0:l.edit)||"Edit Data",doc:((s=r.titles)==null?void 0:s.doc)||"View Docs"};return{view:t==null?void 0:t.view,edit:t==null?void 0:t.edit,doc:t==null?void 0:t.doc,close:""}[u.value||"view"]}),C=e.computed(()=>a.value?Object.entries(a.value).filter(t=>r.imageProps.includes(t[0])?!1:u.value==="edit"?![...r.exclusions,...r.formExclusions].includes(t[0]):!r.exclusions.includes(t[0])):[]),N=e.computed(()=>C.value.map(([t,o])=>({col:12,name:t,type:typeof o=="boolean"?"radio":"text",label:i.titleCase(i.slug(t," ")),choices:[{label:"Accept",value:!0},{label:"Reject",value:!0}]}))),c=(t,o="view",l)=>{if(V.value=o!=="close",o==="close")return f("toggleDialog",!1);if(l)u.value="doc",g.value={alt:l,src:a.value[l]};else{a.value=t,u.value=o;const s=Object.fromEntries(Object.entries(t).map(([n,m])=>[i.slug(n),p(m)]));f("setData",s,o)}y()},B=(t,o)=>{var l,s,n;return(l=r.booleanLabels)!=null&&l[t]?o?(s=r.booleanLabels)==null?void 0:s[t][0]:(n=r.booleanLabels)==null?void 0:n[t][1]:o?"Active":"Inactive"},p=(t,o)=>{var l,s,n;return o&&((l=r.valuesMap)!=null&&l[o])&&(t=(s=r.valuesMap)==null?void 0:s[o]),o&&((n=r.dateProps)!=null&&n.includes(o))?L.formatDate(t,r.dateFormat):typeof t=="boolean"?Number(t):typeof t=="function"?t(a.value):Array.isArray(t)&&t.every(m=>typeof m=="string")&&u.value==="view"?i.titleCase(t.join(", ")):t};e.watch(u,t=>{t!=="doc"&&(g.value=void 0)});const M=()=>{y(),f("click:save",d.value,a.value)},y=()=>{if(d.value){const t=o=>r.slugifyFormKeys?i.slug(o,"_"):o;d.value=Object.entries(d.value).filter(([o])=>!r.formExclusions.includes(t(o))).reduce((o,[l,s])=>(o[t(l)]=e.toValue(s),o),{})}};return h({sanitizeForm:y}),(t,o)=>(e.openBlock(),e.createBlock(P.default,{class:e.normalizeClass([{"t-card-border":t.bordered,"t-card-shadow":t.shadow,"t-card-rounded":t.rounded},t.contentClass])},{header:e.withCtx(()=>[e.renderSlot(t.$slots,"header",{},()=>[e.createElementVNode("div",j,[e.createElementVNode("div",z,e.toDisplayString($.value),1),t.dialogMode?(e.openBlock(),e.createElementBlock("button",{key:0,class:"close-btn",onClick:o[0]||(o[0]=l=>t.$emit("toggleDialog",!1))}," Ã— ")):e.createCommentVNode("",!0)])])]),default:e.withCtx(()=>[e.createElementVNode("div",null,[u.value==="edit"&&d.value?(e.openBlock(),e.createBlock(e.unref(F.VueForms),e.mergeProps({key:0,rounded:"","show-group-labels":"",class:"p-4 m-4 mx-auto"},t.formProps,{modelValue:d.value,"onUpdate:modelValue":o[1]||(o[1]=l=>d.value=l),fields:N.value,loading:k.value,onCancel:o[2]||(o[2]=l=>u.value="view"),onSubmit:M}),e.createSlots({_:2},[t.$slots["form-actions"]?{name:"actions",fn:e.withCtx(()=>[e.renderSlot(t.$slots,"form-actions",{loading:k.value,submit:M,cancel:()=>u.value="view"})]),key:"0"}:void 0,t.$slots["form-prepend"]?{name:"prepend",fn:e.withCtx(()=>[e.renderSlot(t.$slots,"form-prepend",{form:d.value,errors:w.value,data:a.value,toggle:l=>c(a.value,l)})]),key:"1"}:void 0,t.$slots["form-append"]?{name:"default",fn:e.withCtx(()=>[e.renderSlot(t.$slots,"form-append",{form:d.value,errors:w.value,data:a.value,toggle:l=>c(a.value,l)})]),key:"2"}:void 0,e.renderList(e.unref(i.formSlotNames),l=>({name:l,fn:e.withCtx(s=>[e.renderSlot(t.$slots,l,e.normalizeProps(e.guardReactiveProps(s)))])}))]),1040,["modelValue","fields","loading"])):(u.value==="view"||!d.value)&&a.value?(e.openBlock(),e.createElementBlock("div",T,[e.createElementVNode("div",{class:e.normalizeClass(["t-list",t.listClass]),separator:""},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.imageProps,l=>e.renderSlot(t.$slots,"img-list-item",{toggle:()=>c(a.value,"doc",l),field:l,label:e.unref(i.titleCase)(l),value:String(a.value[l]),key:l},()=>[a.value[l]?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["t-item clickable",{"t-item-separator":t.separator}]),onClick:s=>c(a.value,"doc",l)},[e.createElementVNode("div",A,[e.renderSlot(t.$slots,"image",{src:a.value[l]},()=>[e.createElementVNode("div",U,[e.createElementVNode("img",{src:a.value[l],alt:e.unref(i.titleCase)(l)},null,8,_)])])]),o[4]||(o[4]=e.createElementVNode("div",{class:"t-item-section"},[e.createElementVNode("div",{class:"t-item-label"},"Click to expand")],-1))],10,O)):e.createCommentVNode("",!0)])),128)),e.renderSlot(t.$slots,"list-prepend",{data:a.value,toggle:l=>c(a.value,l)}),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(C.value,l=>{var s;return e.renderSlot(t.$slots,"list-item",{key:l[0],field:l[0],label:((s=t.labelsMap)==null?void 0:s[l[0]])??e.unref(i.titleCase)(l[0]),value:typeof l[1]=="boolean"?B(e.unref(i.slug)(l[0]),l[1]):p(l[1],l[0])},()=>{var n;return[e.createElementVNode("div",{class:e.normalizeClass(["t-item",{"t-item-separator":t.separator}])},[e.createElementVNode("div",I,[e.createElementVNode("div",K,e.toDisplayString(((n=t.labelsMap)==null?void 0:n[l[0]])??e.unref(i.titleCase)(l[0])),1),typeof l[1]=="boolean"?(e.openBlock(),e.createElementBlock("div",R,[e.createElementVNode("div",{class:e.normalizeClass(["t-chip t-chip-square",l[1]?"t-chip-green":"t-chip-red"])},e.toDisplayString(B(e.unref(i.slug)(l[0]),l[1])),3)])):(e.openBlock(),e.createElementBlock("div",Z,e.toDisplayString(p(l[1],l[0])),1))])],2)]})}),128)),e.renderSlot(t.$slots,"list-append",{data:a.value,toggle:l=>c(a.value,l)})],2),e.renderSlot(t.$slots,"list-after",{data:a.value,toggle:l=>c(a.value,l)})])):a.value?(e.openBlock(),e.createElementBlock("div",G,[e.renderSlot(t.$slots,"image-viewer",{close:()=>c(a.value,"view"),src:a.value.imageUrl},()=>{var l,s,n,m,E;return[e.createVNode(D.default,{dense:"",color:"primary",label:"Return",icon:"fas fa-arrow-left",onClick:o[3]||(o[3]=Q=>c(a.value,"view"))}),(l=g.value)!=null&&l.src||a.value[((s=t.imageProps)==null?void 0:s[0])??0]?(e.openBlock(),e.createElementBlock("img",{key:0,style:{width:"100%"},src:String(((n=g.value)==null?void 0:n.src)||a.value[((m=t.imageProps)==null?void 0:m[0])??0]),alt:e.unref(i.titleCase)(((E=g.value)==null?void 0:E.alt)||"Document")},null,8,H)):e.createCommentVNode("",!0)]})])):e.createCommentVNode("",!0)]),e.renderSlot(t.$slots,"loader",{loading:b.value},()=>[e.createVNode(q.default,{showing:b.value},null,8,["showing"])]),e.renderSlot(t.$slots,"footer",{data:a.value,mode:u.value,toggle:l=>c(a.value,l)})]),_:3},8,["class"]))}});exports.default=J;
