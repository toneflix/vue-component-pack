"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue");;/* empty css                    */const i=require("../utils/providers.cjs"),h=require("./TBtn.vue.cjs"),S=require("./dialog/TCard.vue.cjs"),N=require("./TInnerLoading.vue.cjs"),$=require("@toneflix/vue-forms"),D=require("date-fns"),q={class:"flex items-center justify-between"},L={class:"card-title"},P={key:1},j=["onClick"],F={class:"t-item-section t-item-section-avatar"},z={class:"t-avatar"},T=["src","alt"],A={class:"t-item-section"},O={class:"t-item-label caption"},U={key:0,class:"t-item-label"},_={key:1,class:"t-item-label"},I={key:2,class:"image-viewer"},R=["src","alt"],G=e.defineComponent({name:"MainContent",__name:"main-content",props:e.mergeModels({dialogMode:{type:Boolean},listClass:{},titles:{default:()=>({view:"view Data",edit:"Edit Data",doc:"View Docs"})},exclusions:{default:()=>["id"]},formExclusions:{default:()=>["id","imageUrl"]},booleanLabels:{},rounded:{type:Boolean},bordered:{type:Boolean},separator:{type:Boolean},shadow:{type:Boolean},dateProps:{},imageProps:{default:()=>["imageUrl"]},dateFormat:{default:"do MMM, yyyy h:mm a"},labelsMap:{},valuesMap:{},data:{},form:{},mode:{},errors:{},saving:{type:Boolean},loading:{type:Boolean}},{data:{required:!0},dataModifiers:{},form:{required:!1},formModifiers:{},mode:{default:"view"},modeModifiers:{},loading:{type:Boolean,default:!1},loadingModifiers:{},saving:{type:Boolean,default:!1},savingModifiers:{},errors:{default:{}},errorsModifiers:{}}),emits:e.mergeModels(["updateData","click:save","toggleDialog"],["update:data","update:form","update:mode","update:loading","update:saving","update:errors"]),setup(d,{emit:C}){const g=C,n=d,o=e.useModel(d,"data"),v=e.useModel(d,"form"),u=e.useModel(d,"mode"),y=e.useModel(d,"loading"),M=e.useModel(d,"saving"),b=e.useModel(d,"errors"),m=e.ref(),E=e.ref(!1),k=e.computed(()=>o.value?Object.entries(o.value).filter(t=>n.imageProps.includes(t[0])?!1:u.value==="edit"?![...n.exclusions,...n.formExclusions].includes(t[0]):!n.exclusions.includes(t[0])):[]),V=e.computed(()=>k.value.map(([t,a])=>({col:12,name:t,type:typeof a=="boolean"?"radio":"text",label:i.titleCase(i.slug(t," ")),choices:[{label:"Accept",value:!0},{label:"Reject",value:!0}]}))),p=(t,a="view",l)=>{if(E.value=!0,l)u.value="doc",m.value={alt:l,src:o.value[l]};else{o.value=t,u.value=a;const s=Object.fromEntries(Object.entries(t).map(([r,c])=>[i.slug(r),f(c)]));g("updateData",s,a)}},w=(t,a)=>{var l,s,r;return(l=n.booleanLabels)!=null&&l[t]?a?(s=n.booleanLabels)==null?void 0:s[t][0]:(r=n.booleanLabels)==null?void 0:r[t][1]:a?"Active":"Inactive"},f=(t,a)=>{var l,s,r;return a&&((l=n.valuesMap)!=null&&l[a])&&(t=(s=n.valuesMap)==null?void 0:s[a]),a&&((r=n.dateProps)!=null&&r.includes(a))?D.formatDate(t,n.dateFormat):typeof t=="boolean"?Number(t):typeof t=="function"?t(o.value):Array.isArray(t)&&t.every(c=>typeof c=="string")&&u.value==="view"?i.titleCase(t.join(", ")):t};return e.watch(u,t=>{t!=="doc"&&(m.value=void 0)}),(t,a)=>(e.openBlock(),e.createBlock(S.default,{class:e.normalizeClass({"t-card-border":t.bordered,"t-card-shadow":t.shadow,"t-card-rounded":t.rounded})},{header:e.withCtx(()=>[e.renderSlot(t.$slots,"header",{},()=>{var l,s,r;return[e.createElementVNode("div",q,[e.createElementVNode("div",L,e.toDisplayString({view:(l=t.titles)==null?void 0:l.view,edit:(s=t.titles)==null?void 0:s.edit,doc:(r=t.titles)==null?void 0:r.doc}[u.value||"view"]),1),t.dialogMode?(e.openBlock(),e.createElementBlock("button",{key:0,class:"close-btn",onClick:a[0]||(a[0]=c=>t.$emit("toggleDialog",!1))}," Ã— ")):e.createCommentVNode("",!0)])]})]),default:e.withCtx(()=>[e.createElementVNode("div",null,[u.value==="edit"&&v.value?(e.openBlock(),e.createBlock(e.unref($.VueForms),{key:0,rounded:"","show-group-labels":"",class:"p-4 m-4 mx-auto",fields:V.value,loading:M.value,modelValue:v.value,"onUpdate:modelValue":a[1]||(a[1]=l=>v.value=l),onCancel:a[2]||(a[2]=l=>u.value="view"),onSubmit:a[3]||(a[3]=l=>g("click:save",o.value))},e.createSlots({_:2},[t.$slots["form-prepend"]?{name:"prepend",fn:e.withCtx(()=>[e.renderSlot(t.$slots,"form-prepend",{form:v.value,errors:b.value,data:o.value})]),key:"0"}:void 0,t.$slots["form-append"]?{name:"default",fn:e.withCtx(()=>[e.renderSlot(t.$slots,"form-append",{form:v.value,errors:b.value,data:o.value})]),key:"1"}:void 0]),1032,["fields","loading","modelValue"])):(u.value==="view"||!v.value)&&o.value?(e.openBlock(),e.createElementBlock("div",P,[e.createElementVNode("div",{class:e.normalizeClass(["t-list",t.listClass]),separator:""},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.imageProps,l=>e.renderSlot(t.$slots,"img-list-item",{toggle:()=>p(o.value,"doc",l),field:l,label:e.unref(i.titleCase)(l),value:String(o.value[l]),key:l},()=>[o.value[l]?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["t-item clickable",{"t-item-separator":t.separator}]),onClick:s=>p(o.value,"doc",l)},[e.createElementVNode("div",F,[e.renderSlot(t.$slots,"image",{src:o.value[l]},()=>[e.createElementVNode("div",z,[e.createElementVNode("img",{src:o.value[l],alt:e.unref(i.titleCase)(l)},null,8,T)])])]),a[5]||(a[5]=e.createElementVNode("div",{class:"t-item-section"},[e.createElementVNode("div",{class:"t-item-label"},"Click to expand")],-1))],10,j)):e.createCommentVNode("",!0)])),128)),e.renderSlot(t.$slots,"list-prepend",{data:o.value}),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(k.value,l=>{var s;return e.renderSlot(t.$slots,"list-item",{key:l[0],field:l[0],label:((s=t.labelsMap)==null?void 0:s[l[0]])??e.unref(i.titleCase)(l[0]),value:typeof l[1]=="boolean"?w(e.unref(i.slug)(l[0]),l[1]):f(l[1],l[0])},()=>{var r;return[e.createElementVNode("div",{class:e.normalizeClass(["t-item",{"t-item-separator":t.separator}])},[e.createElementVNode("div",A,[e.createElementVNode("div",O,e.toDisplayString(((r=t.labelsMap)==null?void 0:r[l[0]])??e.unref(i.titleCase)(l[0])),1),typeof l[1]=="boolean"?(e.openBlock(),e.createElementBlock("div",U,[e.createElementVNode("div",{class:e.normalizeClass(["t-chip t-chip-square",l[1]?"t-chip-green":"t-chip-red"])},e.toDisplayString(w(e.unref(i.slug)(l[0]),l[1])),3)])):(e.openBlock(),e.createElementBlock("div",_,e.toDisplayString(f(l[1],l[0])),1))])],2)]})}),128)),e.renderSlot(t.$slots,"list-append",{data:o.value})],2),e.renderSlot(t.$slots,"list-after",{data:o.value})])):o.value?(e.openBlock(),e.createElementBlock("div",I,[e.renderSlot(t.$slots,"image-viewer",{close:()=>p(o.value,"view"),src:o.value.imageUrl},()=>{var l,s,r,c,B;return[e.createVNode(h.default,{dense:"",color:"primary",label:"Return",icon:"fas fa-arrow-left",onClick:a[4]||(a[4]=H=>p(o.value,"view"))}),(l=m.value)!=null&&l.src||o.value[((s=t.imageProps)==null?void 0:s[0])??0]?(e.openBlock(),e.createElementBlock("img",{key:0,style:{width:"100%"},src:String(((r=m.value)==null?void 0:r.src)||o.value[((c=t.imageProps)==null?void 0:c[0])??0]),alt:e.unref(i.titleCase)(((B=m.value)==null?void 0:B.alt)||"Document")},null,8,R)):e.createCommentVNode("",!0)]})])):e.createCommentVNode("",!0)]),e.renderSlot(t.$slots,"loader",{loading:y.value},()=>[e.createVNode(N.default,{showing:y.value},null,8,["showing"])])]),_:3},8,["class"]))}});exports.default=G;
