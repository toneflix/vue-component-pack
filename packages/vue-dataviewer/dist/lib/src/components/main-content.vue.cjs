"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue");;/* empty css                    */const u=require("../utils/providers.cjs"),M=require("./TBtn.vue.cjs"),C=require("./dialog/TCard.vue.cjs"),V=require("./TInnerLoading.vue.cjs"),D=require("@toneflix/vue-forms"),h=require("date-fns"),N={class:"flex items-center justify-between"},_={class:"card-title"},S={key:1},$={class:"t-list",separator:""},q={class:"t-item-section avatar"},j={class:"t-avatar"},L=["src"],U={class:"t-item-section"},F={class:"t-item-label caption"},T={key:0,class:"t-item-label"},z={key:1,class:"t-item-label"},A={key:2,class:"img-preview"},O=["src"],P=e.defineComponent({name:"MainContent",__name:"main-content",props:e.mergeModels({titles:{default:()=>({view:"view Data",edit:"Edit Data",doc:"View Docs"})},dialogMode:{type:Boolean},exclusions:{default:()=>["imageUrl"]},formExclusions:{default:()=>["imageUrl"]},booleanLabels:{},rounded:{type:Boolean},bordered:{type:Boolean},separator:{type:Boolean},shadow:{type:Boolean},dateProps:{},dateFormat:{default:"do MMM, yyyy h:mm a"}},{data:{},dataModifiers:{},form:{required:!1},formModifiers:{},mode:{default:"view"},modeModifiers:{},loading:{type:Boolean,default:!1},loadingModifiers:{},saving:{type:Boolean,default:!1},savingModifiers:{},errors:{default:{}},errorsModifiers:{}}),emits:e.mergeModels(["updateData","click:save","toggleDialog"],["update:data","update:form","update:mode","update:loading","update:saving","update:errors"]),setup(n,{emit:y}){const m=y,a=e.useModel(n,"data"),c=e.useModel(n,"form"),s=n,i=e.useModel(n,"mode"),k=e.useModel(n,"loading"),b=e.useModel(n,"saving"),v=e.useModel(n,"errors"),w=e.ref(!1),p=e.computed(()=>a.value?Object.entries(a.value).filter(t=>i.value==="edit"?![...s.exclusions,...s.formExclusions].includes(t[0]):!s.exclusions.includes(t[0])):[]),B=e.computed(()=>p.value.map(([t,o])=>({col:12,name:t,type:typeof o=="boolean"?"radio":"text",label:u.titleCase(u.slug(t," ")),choices:[{label:"Accept",value:!0},{label:"Reject",value:!0}]}))),f=(t,o="view")=>{a.value=t,i.value=o,w.value=!0;const l=Object.fromEntries(Object.entries(t).map(([r,d])=>[u.slug(r),g(d)]));m("updateData",l,o)},E=(t,o)=>{var l,r,d;return(l=s.booleanLabels)!=null&&l[t]?o?(r=s.booleanLabels)==null?void 0:r[t][0]:(d=s.booleanLabels)==null?void 0:d[t][1]:o?"Active":"Inactive"},g=(t,o)=>{var l;return o&&((l=s.dateProps)!=null&&l.includes(o))?h.formatDate(t,s.dateFormat):typeof t=="boolean"?Number(t):typeof t=="function"?t(a.value):Array.isArray(t)&&t.every(r=>typeof r=="string")&&i.value==="view"?u.titleCase(t.join(", ")):t};return(t,o)=>(e.openBlock(),e.createBlock(C.default,{class:e.normalizeClass({"t-card-border":t.bordered,"t-card-shadow":t.shadow,"t-card-rounded":t.rounded})},{header:e.withCtx(()=>[e.renderSlot(t.$slots,"header",{},()=>{var l,r,d;return[e.createElementVNode("div",N,[e.createElementVNode("div",_,e.toDisplayString({view:(l=t.titles)==null?void 0:l.view,edit:(r=t.titles)==null?void 0:r.edit,doc:(d=t.titles)==null?void 0:d.doc}[i.value||"view"]),1),t.dialogMode?(e.openBlock(),e.createElementBlock("button",{key:0,class:"close-btn",onClick:o[0]||(o[0]=I=>t.$emit("toggleDialog",!1))}," Ã— ")):e.createCommentVNode("",!0)])]})]),default:e.withCtx(()=>[e.createElementVNode("div",null,[i.value==="edit"&&c.value?(e.openBlock(),e.createBlock(e.unref(D.VueForms),{key:0,rounded:"","show-group-labels":"",class:"p-4 m-4 mx-auto",fields:B.value,loading:b.value,modelValue:c.value,"onUpdate:modelValue":o[1]||(o[1]=l=>c.value=l),onCancel:o[2]||(o[2]=l=>i.value="view"),onSubmit:o[3]||(o[3]=l=>m("click:save",a.value))},e.createSlots({_:2},[t.$slots["form-prepend"]?{name:"prepend",fn:e.withCtx(()=>[e.renderSlot(t.$slots,"form-prepend",{form:c.value,errors:v.value,viewData:a.value})]),key:"0"}:void 0,t.$slots["form-append"]?{name:"default",fn:e.withCtx(()=>[e.renderSlot(t.$slots,"form-append",{form:c.value,errors:v.value,viewData:a.value})]),key:"1"}:void 0]),1032,["fields","loading","modelValue"])):(i.value==="view"||!c.value)&&a.value?(e.openBlock(),e.createElementBlock("div",S,[e.createElementVNode("div",$,[a.value.imageUrl?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["q-my-sm t-item clickable",{"t-item-separator":t.separator}]),onClick:o[4]||(o[4]=l=>f(a.value,"doc"))},[e.createElementVNode("div",q,[e.createElementVNode("div",j,[e.createElementVNode("img",{src:a.value.imageUrl,alt:"Document"},null,8,L)])]),o[6]||(o[6]=e.createElementVNode("div",{class:"t-item-section"},[e.createElementVNode("div",{class:"t-item-label"},"Click to expand")],-1))],2)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.value,l=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["q-my-sm t-item",{"t-item-separator":t.separator}]),key:l[0]},[e.createElementVNode("div",U,[e.createElementVNode("div",F,e.toDisplayString(e.unref(u.titleCase)(e.unref(u.slug)(l[0]))),1),typeof l[1]=="boolean"?(e.openBlock(),e.createElementBlock("div",T,[e.createElementVNode("div",{class:e.normalizeClass(["t-chip t-chip-square",l[1]?"t-chip-green":"t-chip-red"])},e.toDisplayString(E(e.unref(u.slug)(l[0]),l[1])),3)])):(e.openBlock(),e.createElementBlock("div",z,e.toDisplayString(g(l[1],l[0])),1))])],2))),128)),e.renderSlot(t.$slots,"list-append",{viewData:a.value})]),e.renderSlot(t.$slots,"list-after",{viewData:a.value})])):a.value?(e.openBlock(),e.createElementBlock("div",A,[e.createVNode(M.default,{dense:"",color:"primary",label:"Return",icon:"fas fa-arrow-left",onClick:o[5]||(o[5]=l=>f(a.value,"view"))}),a.value.imageUrl?(e.openBlock(),e.createElementBlock("img",{key:0,style:{width:"100%"},src:a.value.imageUrl,alt:"Document"},null,8,O)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)]),e.createVNode(V.default,{showing:k.value},null,8,["showing"])]),_:3},8,["class"]))}});exports.default=P;
