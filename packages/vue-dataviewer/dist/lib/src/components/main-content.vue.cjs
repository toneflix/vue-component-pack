"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue");;/* empty css                    */const i=require("../utils/providers.cjs"),C=require("./TBtn.vue.cjs"),V=require("./dialog/TCard.vue.cjs"),N=require("./TInnerLoading.vue.cjs"),h=require("@toneflix/vue-forms"),D=require("date-fns"),S={class:"flex items-center justify-between"},$={class:"card-title"},q={key:1},U={class:"t-list",separator:""},_={class:"t-item-section avatar"},j={class:"t-avatar"},L=["src"],F={class:"t-item-section"},T={class:"t-item-label caption"},z={key:0,class:"t-item-label"},A={key:1,class:"t-item-label"},O={key:2,class:"img-preview"},P=["src"],I=e.defineComponent({name:"MainContent",__name:"main-content",props:e.mergeModels({titles:{default:()=>({view:"view Data",edit:"Edit Data",doc:"View Docs"})},dialogMode:{type:Boolean},exclusions:{default:()=>["imageUrl"]},formExclusions:{default:()=>["imageUrl"]},booleanLabels:{},rounded:{type:Boolean},bordered:{type:Boolean},separator:{type:Boolean},shadow:{type:Boolean},dateProps:{},dateFormat:{default:"do MMM, yyyy h:mm a"},labelsMap:{},valuesMap:{}},{data:{required:!0},dataModifiers:{},form:{required:!1},formModifiers:{},mode:{default:"view"},modeModifiers:{},loading:{type:Boolean,default:!1},loadingModifiers:{},saving:{type:Boolean,default:!1},savingModifiers:{},errors:{default:{}},errorsModifiers:{}}),emits:e.mergeModels(["updateData","click:save","toggleDialog"],["update:data","update:form","update:mode","update:loading","update:saving","update:errors"]),setup(u,{emit:w}){const p=w,l=e.useModel(u,"data"),c=e.useModel(u,"form"),n=u,d=e.useModel(u,"mode"),g=e.useModel(u,"loading"),M=e.useModel(u,"saving"),f=e.useModel(u,"errors"),B=e.ref(!1),y=e.computed(()=>l.value?Object.entries(l.value).filter(t=>d.value==="edit"?![...n.exclusions,...n.formExclusions].includes(t[0]):!n.exclusions.includes(t[0])):[]),E=e.computed(()=>y.value.map(([t,a])=>({col:12,name:t,type:typeof a=="boolean"?"radio":"text",label:i.titleCase(i.slug(t," ")),choices:[{label:"Accept",value:!0},{label:"Reject",value:!0}]}))),m=(t,a="view")=>{l.value=t,d.value=a,B.value=!0;const o=Object.fromEntries(Object.entries(t).map(([r,s])=>[i.slug(r),v(s)]));p("updateData",o,a)},b=(t,a)=>{var o,r,s;return(o=n.booleanLabels)!=null&&o[t]?a?(r=n.booleanLabels)==null?void 0:r[t][0]:(s=n.booleanLabels)==null?void 0:s[t][1]:a?"Active":"Inactive"},v=(t,a)=>{var o,r,s;return a&&((o=n.valuesMap)!=null&&o[a])&&(t=(r=n.valuesMap)==null?void 0:r[a]),a&&((s=n.dateProps)!=null&&s.includes(a))?D.formatDate(t,n.dateFormat):typeof t=="boolean"?Number(t):typeof t=="function"?t(l.value):Array.isArray(t)&&t.every(k=>typeof k=="string")&&d.value==="view"?i.titleCase(t.join(", ")):t};return(t,a)=>(e.openBlock(),e.createBlock(V.default,{class:e.normalizeClass({"t-card-border":t.bordered,"t-card-shadow":t.shadow,"t-card-rounded":t.rounded})},{header:e.withCtx(()=>[e.renderSlot(t.$slots,"header",{},()=>{var o,r,s;return[e.createElementVNode("div",S,[e.createElementVNode("div",$,e.toDisplayString({view:(o=t.titles)==null?void 0:o.view,edit:(r=t.titles)==null?void 0:r.edit,doc:(s=t.titles)==null?void 0:s.doc}[d.value||"view"]),1),t.dialogMode?(e.openBlock(),e.createElementBlock("button",{key:0,class:"close-btn",onClick:a[0]||(a[0]=k=>t.$emit("toggleDialog",!1))}," Ã— ")):e.createCommentVNode("",!0)])]})]),default:e.withCtx(()=>[e.createElementVNode("div",null,[d.value==="edit"&&c.value?(e.openBlock(),e.createBlock(e.unref(h.VueForms),{key:0,rounded:"","show-group-labels":"",class:"p-4 m-4 mx-auto",fields:E.value,loading:M.value,modelValue:c.value,"onUpdate:modelValue":a[1]||(a[1]=o=>c.value=o),onCancel:a[2]||(a[2]=o=>d.value="view"),onSubmit:a[3]||(a[3]=o=>p("click:save",l.value))},e.createSlots({_:2},[t.$slots["form-prepend"]?{name:"prepend",fn:e.withCtx(()=>[e.renderSlot(t.$slots,"form-prepend",{form:c.value,errors:f.value,data:l.value})]),key:"0"}:void 0,t.$slots["form-append"]?{name:"default",fn:e.withCtx(()=>[e.renderSlot(t.$slots,"form-append",{form:c.value,errors:f.value,data:l.value})]),key:"1"}:void 0]),1032,["fields","loading","modelValue"])):(d.value==="view"||!c.value)&&l.value?(e.openBlock(),e.createElementBlock("div",q,[e.createElementVNode("div",U,[l.value.imageUrl?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["q-my-sm t-item clickable",{"t-item-separator":t.separator}]),onClick:a[4]||(a[4]=o=>m(l.value,"doc"))},[e.createElementVNode("div",_,[e.createElementVNode("div",j,[e.createElementVNode("img",{src:l.value.imageUrl,alt:"Document"},null,8,L)])]),a[6]||(a[6]=e.createElementVNode("div",{class:"t-item-section"},[e.createElementVNode("div",{class:"t-item-label"},"Click to expand")],-1))],2)):e.createCommentVNode("",!0),e.renderSlot(t.$slots,"list-prepend",{data:l.value}),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(y.value,o=>{var r;return e.renderSlot(t.$slots,"list-item",{key:o[0],field:o[0],label:((r=t.labelsMap)==null?void 0:r[o[0]])??e.unref(i.titleCase)(e.unref(i.slug)(o[0])),value:typeof o[1]=="boolean"?b(e.unref(i.slug)(o[0]),o[1]):v(o[1],o[0])},()=>{var s;return[e.createElementVNode("div",{class:e.normalizeClass(["q-my-sm t-item",{"t-item-separator":t.separator}])},[e.createElementVNode("div",F,[e.createElementVNode("div",T,e.toDisplayString(((s=t.labelsMap)==null?void 0:s[o[0]])??e.unref(i.titleCase)(e.unref(i.slug)(o[0]))),1),typeof o[1]=="boolean"?(e.openBlock(),e.createElementBlock("div",z,[e.createElementVNode("div",{class:e.normalizeClass(["t-chip t-chip-square",o[1]?"t-chip-green":"t-chip-red"])},e.toDisplayString(b(e.unref(i.slug)(o[0]),o[1])),3)])):(e.openBlock(),e.createElementBlock("div",A,e.toDisplayString(v(o[1],o[0])),1))])],2)]})}),128)),e.renderSlot(t.$slots,"list-append",{data:l.value})]),e.renderSlot(t.$slots,"list-after",{data:l.value})])):l.value?(e.openBlock(),e.createElementBlock("div",O,[e.renderSlot(t.$slots,"image",{close:()=>m(l.value,"view"),src:l.value.imageUrl},()=>[e.createVNode(C.default,{dense:"",color:"primary",label:"Return",icon:"fas fa-arrow-left",onClick:a[5]||(a[5]=o=>m(l.value,"view"))}),l.value.imageUrl?(e.openBlock(),e.createElementBlock("img",{key:0,style:{width:"100%"},src:l.value.imageUrl,alt:"Document"},null,8,P)):e.createCommentVNode("",!0)])])):e.createCommentVNode("",!0)]),e.renderSlot(t.$slots,"loader",{loading:g.value},()=>[e.createVNode(N.default,{showing:g.value},null,8,["showing"])])]),_:3},8,["class"]))}});exports.default=I;
