"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue");;/* empty css                    */const i=require("../utils/providers.cjs"),h=require("./TBtn.vue.cjs"),N=require("./dialog/TCard.vue.cjs"),$=require("./TInnerLoading.vue.cjs"),D=require("@toneflix/vue-forms"),P=require("date-fns"),q={class:"flex items-center justify-between no-wrap"},F={class:"card-title"},L={key:1},j=["onClick"],z={class:"t-item-section t-item-section-avatar"},T={class:"t-avatar"},O=["src","alt"],A={class:"t-item-section"},U={class:"t-item-label caption"},_={key:0,class:"t-item-label"},I={key:1,class:"t-item-label"},K={key:2,class:"image-viewer"},R=["src","alt"],Z=e.defineComponent({name:"MainContent",__name:"main-content",props:e.mergeModels({dialogMode:{type:Boolean},listClass:{},dialogClass:{},dialogZIndex:{},exclusions:{default:()=>["id"]},formExclusions:{default:()=>["id","imageUrl"]},booleanLabels:{},rounded:{type:Boolean},bordered:{type:Boolean},separator:{type:Boolean},shadow:{type:Boolean},dateProps:{},imageProps:{default:()=>["imageUrl"]},dateFormat:{default:"do MMM, yyyy h:mm a"},labelsMap:{},valuesMap:{},titles:{},contentClass:{},data:{},form:{},formProps:{},slugifyFormKeys:{type:Boolean},mode:{},errors:{},saving:{type:Boolean},loading:{type:Boolean}},{data:{required:!0},dataModifiers:{},form:{required:!1},formModifiers:{},mode:{default:"view"},modeModifiers:{},loading:{type:Boolean,default:!1},loadingModifiers:{},saving:{type:Boolean,default:!1},savingModifiers:{},errors:{default:{}},errorsModifiers:{}}),emits:e.mergeModels(["updateData","click:save","toggleDialog"],["update:data","update:form","update:mode","update:loading","update:saving","update:errors"]),setup(v,{emit:B}){const f=B,r=v,a=e.useModel(v,"data"),c=e.useModel(v,"form"),u=e.useModel(v,"mode"),y=e.useModel(v,"loading"),M=e.useModel(v,"saving"),b=e.useModel(v,"errors"),g=e.ref(),E=e.ref(!1),V=e.computed(()=>{var o,l,s;const t={view:((o=r.titles)==null?void 0:o.view)||"view Data",edit:((l=r.titles)==null?void 0:l.edit)||"Edit Data",doc:((s=r.titles)==null?void 0:s.doc)||"View Docs"};return{view:t==null?void 0:t.view,edit:t==null?void 0:t.edit,doc:t==null?void 0:t.doc,close:""}[u.value||"view"]}),k=e.computed(()=>a.value?Object.entries(a.value).filter(t=>r.imageProps.includes(t[0])?!1:u.value==="edit"?![...r.exclusions,...r.formExclusions].includes(t[0]):!r.exclusions.includes(t[0])):[]),S=e.computed(()=>k.value.map(([t,o])=>({col:12,name:t,type:typeof o=="boolean"?"radio":"text",label:i.titleCase(i.slug(t," ")),choices:[{label:"Accept",value:!0},{label:"Reject",value:!0}]}))),d=(t,o="view",l)=>{if(E.value=o!=="close",o==="close")return f("toggleDialog",!1);if(l)u.value="doc",g.value={alt:l,src:a.value[l]};else{a.value=t,u.value=o;const s=Object.fromEntries(Object.entries(t).map(([n,m])=>[i.slug(n),p(m)]));f("updateData",s,o)}},w=(t,o)=>{var l,s,n;return(l=r.booleanLabels)!=null&&l[t]?o?(s=r.booleanLabels)==null?void 0:s[t][0]:(n=r.booleanLabels)==null?void 0:n[t][1]:o?"Active":"Inactive"},p=(t,o)=>{var l,s,n;return o&&((l=r.valuesMap)!=null&&l[o])&&(t=(s=r.valuesMap)==null?void 0:s[o]),o&&((n=r.dateProps)!=null&&n.includes(o))?P.formatDate(t,r.dateFormat):typeof t=="boolean"?Number(t):typeof t=="function"?t(a.value):Array.isArray(t)&&t.every(m=>typeof m=="string")&&u.value==="view"?i.titleCase(t.join(", ")):t};return e.watch(u,t=>{t!=="doc"&&(g.value=void 0)}),e.onBeforeMount(()=>{if(c.value){const t=o=>r.slugifyFormKeys?i.slug(o,"_"):o;c.value=Object.entries(c.value).filter(([o])=>!r.formExclusions.includes(t(o))).reduce((o,[l,s])=>(o[t(l)]=e.toValue(s),o),{})}}),(t,o)=>(e.openBlock(),e.createBlock(N.default,{class:e.normalizeClass([{"t-card-border":t.bordered,"t-card-shadow":t.shadow,"t-card-rounded":t.rounded},t.contentClass])},{header:e.withCtx(()=>[e.renderSlot(t.$slots,"header",{},()=>[e.createElementVNode("div",q,[e.createElementVNode("div",F,e.toDisplayString(V.value),1),t.dialogMode?(e.openBlock(),e.createElementBlock("button",{key:0,class:"close-btn",onClick:o[0]||(o[0]=l=>t.$emit("toggleDialog",!1))}," Ã— ")):e.createCommentVNode("",!0)])])]),default:e.withCtx(()=>[e.createElementVNode("div",null,[u.value==="edit"&&c.value?(e.openBlock(),e.createBlock(e.unref(D.VueForms),e.mergeProps({key:0,rounded:"","show-group-labels":"",class:"p-4 m-4 mx-auto"},t.formProps,{modelValue:c.value,"onUpdate:modelValue":o[1]||(o[1]=l=>c.value=l),fields:S.value,loading:M.value,onCancel:o[2]||(o[2]=l=>u.value="view"),onSubmit:o[3]||(o[3]=l=>f("click:save",a.value))}),e.createSlots({_:2},[t.$slots["form-prepend"]?{name:"prepend",fn:e.withCtx(()=>[e.renderSlot(t.$slots,"form-prepend",{form:c.value,errors:b.value,data:a.value,toggle:l=>d(a.value,l)})]),key:"0"}:void 0,t.$slots["form-append"]?{name:"default",fn:e.withCtx(()=>[e.renderSlot(t.$slots,"form-append",{form:c.value,errors:b.value,data:a.value,toggle:l=>d(a.value,l)})]),key:"1"}:void 0,e.renderList(e.unref(i.formSlotNames),l=>({name:l,fn:e.withCtx(s=>[e.renderSlot(t.$slots,l,e.normalizeProps(e.guardReactiveProps(s)))])}))]),1040,["modelValue","fields","loading"])):(u.value==="view"||!c.value)&&a.value?(e.openBlock(),e.createElementBlock("div",L,[e.createElementVNode("div",{class:e.normalizeClass(["t-list",t.listClass]),separator:""},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.imageProps,l=>e.renderSlot(t.$slots,"img-list-item",{toggle:()=>d(a.value,"doc",l),field:l,label:e.unref(i.titleCase)(l),value:String(a.value[l]),key:l},()=>[a.value[l]?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["t-item clickable",{"t-item-separator":t.separator}]),onClick:s=>d(a.value,"doc",l)},[e.createElementVNode("div",z,[e.renderSlot(t.$slots,"image",{src:a.value[l]},()=>[e.createElementVNode("div",T,[e.createElementVNode("img",{src:a.value[l],alt:e.unref(i.titleCase)(l)},null,8,O)])])]),o[5]||(o[5]=e.createElementVNode("div",{class:"t-item-section"},[e.createElementVNode("div",{class:"t-item-label"},"Click to expand")],-1))],10,j)):e.createCommentVNode("",!0)])),128)),e.renderSlot(t.$slots,"list-prepend",{data:a.value,toggle:l=>d(a.value,l)}),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(k.value,l=>{var s;return e.renderSlot(t.$slots,"list-item",{key:l[0],field:l[0],label:((s=t.labelsMap)==null?void 0:s[l[0]])??e.unref(i.titleCase)(l[0]),value:typeof l[1]=="boolean"?w(e.unref(i.slug)(l[0]),l[1]):p(l[1],l[0])},()=>{var n;return[e.createElementVNode("div",{class:e.normalizeClass(["t-item",{"t-item-separator":t.separator}])},[e.createElementVNode("div",A,[e.createElementVNode("div",U,e.toDisplayString(((n=t.labelsMap)==null?void 0:n[l[0]])??e.unref(i.titleCase)(l[0])),1),typeof l[1]=="boolean"?(e.openBlock(),e.createElementBlock("div",_,[e.createElementVNode("div",{class:e.normalizeClass(["t-chip t-chip-square",l[1]?"t-chip-green":"t-chip-red"])},e.toDisplayString(w(e.unref(i.slug)(l[0]),l[1])),3)])):(e.openBlock(),e.createElementBlock("div",I,e.toDisplayString(p(l[1],l[0])),1))])],2)]})}),128)),e.renderSlot(t.$slots,"list-append",{data:a.value,toggle:l=>d(a.value,l)})],2),e.renderSlot(t.$slots,"list-after",{data:a.value,toggle:l=>d(a.value,l)})])):a.value?(e.openBlock(),e.createElementBlock("div",K,[e.renderSlot(t.$slots,"image-viewer",{close:()=>d(a.value,"view"),src:a.value.imageUrl},()=>{var l,s,n,m,C;return[e.createVNode(h.default,{dense:"",color:"primary",label:"Return",icon:"fas fa-arrow-left",onClick:o[4]||(o[4]=G=>d(a.value,"view"))}),(l=g.value)!=null&&l.src||a.value[((s=t.imageProps)==null?void 0:s[0])??0]?(e.openBlock(),e.createElementBlock("img",{key:0,style:{width:"100%"},src:String(((n=g.value)==null?void 0:n.src)||a.value[((m=t.imageProps)==null?void 0:m[0])??0]),alt:e.unref(i.titleCase)(((C=g.value)==null?void 0:C.alt)||"Document")},null,8,R)):e.createCommentVNode("",!0)]})])):e.createCommentVNode("",!0)]),e.renderSlot(t.$slots,"loader",{loading:y.value},()=>[e.createVNode($.default,{showing:y.value},null,8,["showing"])]),e.renderSlot(t.$slots,"footer",{data:a.value,mode:u.value,toggle:l=>d(a.value,l)})]),_:3},8,["class"]))}});exports.default=Z;
