"use strict";var V=Object.create;var w=Object.defineProperty;var D=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var N=Object.getPrototypeOf,S=Object.prototype.hasOwnProperty;var _=(r,s,n,p)=>{if(s&&typeof s=="object"||typeof s=="function")for(let l of h(s))!S.call(r,l)&&l!==n&&w(r,l,{get:()=>s[l],enumerable:!(p=D(s,l))||p.enumerable});return r};var $=(r,s,n)=>(n=r!=null?V(N(r)):{},_(s||!r||!r.__esModule?w(n,"default",{value:r,enumerable:!0}):n,r));Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue");;/* empty css                    */const c=require("../utils/providers.cjs"),q=require("./TBtn.vue.cjs"),A=require("./dialog/TCard.vue.cjs"),j=require("./TInnerLoading.vue.cjs"),L=require("@toneflix/vue-forms"),U={class:"flex items-center justify-between"},T={class:"card-title"},z={key:1},O={class:"t-list",separator:""},Y={class:"t-item-section avatar"},F={class:"t-avatar"},I=["src"],R={class:"t-item-section"},P={class:"t-item-label caption"},G={key:0,class:"t-item-label"},H={key:1,class:"t-item-label"},J={key:2,class:"img-preview"},K=["src"],Q=e.defineComponent({name:"MainContent",__name:"main-content",props:e.mergeModels({titles:{default:()=>({view:"view Data",edit:"Edit Data",doc:"View Docs"})},dialogMode:{type:Boolean},exclusions:{default:()=>["id","user","imageUrl","createdAt","updatedAt"]},formExclusions:{default:()=>["id","user","imageUrl","createdAt","updatedAt"]},booleanLabels:{},rounded:{type:Boolean},bordered:{type:Boolean},separator:{type:Boolean},shadow:{type:Boolean}},{data:{},dataModifiers:{},form:{required:!1},formModifiers:{},mode:{default:"view"},modeModifiers:{},loading:{type:Boolean,default:!1},loadingModifiers:{},saving:{type:Boolean,default:!1},savingModifiers:{},errors:{default:{}},errorsModifiers:{}}),emits:e.mergeModels(["updateData","click:save","toggleDialog"],["update:data","update:form","update:mode","update:loading","update:saving","update:errors"]),setup(r,{emit:s}){const n=import("dayjs"),p=s,l=e.useModel(r,"data"),m=e.useModel(r,"form"),v=r,i=e.useModel(r,"mode"),B=e.useModel(r,"loading"),M=e.useModel(r,"saving"),f=e.useModel(r,"errors"),g=e.ref(!1),y=e.computed(()=>l.value?Object.entries(l.value).filter(t=>i.value==="edit"?![...v.exclusions,...v.formExclusions].includes(t[0]):!v.exclusions.includes(t[0])):[]),E=e.computed(()=>y.value.map(([t,o])=>({col:12,name:t,type:typeof o=="boolean"?"radio":"text",label:c.titleCase(c.slug(t," ")),choices:[{label:"Accept",value:!0},{label:"Reject",value:!0}]}))),k=(t,o="view")=>{l.value=t,i.value=o,g.value=!0;const a=Object.fromEntries(Object.entries(t).map(([d,u])=>[c.slug(d),b(u)]));p("updateData",a,o)},C=(t,o)=>{var a,d,u;return(a=v.booleanLabels)!=null&&a[t]?o?(d=v.booleanLabels)==null?void 0:d[t][0]:(u=v.booleanLabels)==null?void 0:u[t][1]:o?"Active":"Inactive"},b=async(t,o)=>o&&o.includes("edAt",o.length-4)?(await n)(String(t)).format("Do MMM, YYYY h:MM A"):typeof t=="boolean"?Number(t):Array.isArray(t)&&t.every(a=>typeof a=="string")&&i.value==="view"?c.titleCase(t.join(", ")):t;return(t,o)=>(e.openBlock(),e.createBlock(A.default,{class:e.normalizeClass({"t-card-border":t.bordered,"t-card-shadow":t.shadow,"t-card-rounded":t.rounded})},{header:e.withCtx(()=>[e.renderSlot(t.$slots,"header",{},()=>{var a,d,u;return[e.createElementVNode("div",U,[e.createElementVNode("div",T,e.toDisplayString({view:(a=t.titles)==null?void 0:a.view,edit:(d=t.titles)==null?void 0:d.edit,doc:(u=t.titles)==null?void 0:u.doc}[i.value||"view"]),1),t.dialogMode?(e.openBlock(),e.createElementBlock("button",{key:0,class:"close-btn",onClick:o[0]||(o[0]=W=>t.$emit("toggleDialog",g.value))}," Ã— ")):e.createCommentVNode("",!0)])]})]),default:e.withCtx(()=>[e.createElementVNode("div",null,[i.value==="edit"&&m.value?(e.openBlock(),e.createBlock(e.unref(L.VueForms),{key:0,rounded:"","show-group-labels":"",class:"p-4 m-4 mx-auto",fields:E.value,loading:M.value,modelValue:m.value,"onUpdate:modelValue":o[1]||(o[1]=a=>m.value=a),onCancel:o[2]||(o[2]=a=>i.value="view"),onSubmit:o[3]||(o[3]=a=>p("click:save",l.value))},e.createSlots({_:2},[t.$slots["form-prepend"]?{name:"prepend",fn:e.withCtx(()=>[e.renderSlot(t.$slots,"form-prepend",{form:m.value,errors:f.value,viewData:l.value})]),key:"0"}:void 0,t.$slots["form-append"]?{name:"default",fn:e.withCtx(()=>[e.renderSlot(t.$slots,"form-append",{form:m.value,errors:f.value,viewData:l.value})]),key:"1"}:void 0]),1032,["fields","loading","modelValue"])):(i.value==="view"||!m.value)&&l.value?(e.openBlock(),e.createElementBlock("div",z,[e.createElementVNode("div",O,[l.value.imageUrl?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["q-my-sm t-item clickable",{"t-item-separator":t.separator}]),onClick:o[4]||(o[4]=a=>k(l.value,"doc"))},[e.createElementVNode("div",Y,[e.createElementVNode("div",F,[e.createElementVNode("img",{src:l.value.imageUrl,alt:"Document"},null,8,I)])]),o[6]||(o[6]=e.createElementVNode("div",{class:"t-item-section"},[e.createElementVNode("div",{class:"t-item-label"},"Click to expand")],-1))],2)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(y.value,a=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["q-my-sm t-item",{"t-item-separator":t.separator}]),key:a[0]},[e.createElementVNode("div",R,[e.createElementVNode("div",P,e.toDisplayString(e.unref(c.titleCase)(e.unref(c.slug)(a[0]))),1),typeof a[1]=="boolean"?(e.openBlock(),e.createElementBlock("div",G,[e.createElementVNode("div",{class:e.normalizeClass(["t-chip t-chip-square",a[1]?"t-chip-green":"t-chip-red"])},e.toDisplayString(C(e.unref(c.slug)(a[0]),a[1])),3)])):(e.openBlock(),e.createElementBlock("div",H,e.toDisplayString(b(a[1],a[0])),1))])],2))),128)),e.renderSlot(t.$slots,"list-append",{viewData:l.value})]),e.renderSlot(t.$slots,"list-after",{viewData:l.value})])):l.value?(e.openBlock(),e.createElementBlock("div",J,[e.createVNode(q.default,{dense:"",color:"primary",label:"Return",icon:"fas fa-arrow-left",onClick:o[5]||(o[5]=a=>k(l.value,"view"))}),l.value.imageUrl?(e.openBlock(),e.createElementBlock("img",{key:0,style:{width:"100%"},src:l.value.imageUrl,alt:"Document"},null,8,K)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)]),e.createVNode(j.default,{showing:B.value},null,8,["showing"])]),_:3},8,["class"]))}});exports.default=Q;
